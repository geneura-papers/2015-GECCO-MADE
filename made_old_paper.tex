\documentclass[conference]{IEEEtran}
% If the IEEEtran.cls has not been installed into the LaTeX system files,
% manually specify the path to it: e.g.,
% \documentclass[conference]{../sty/IEEEtran}

\usepackage[latin1]{inputenc}
\usepackage{amssymb}
\setcounter{tocdepth}{3}
\usepackage{graphicx}
\usepackage{subfigure}

\usepackage{url}

% correct bad hyphenation here
\hyphenation{}

\IEEEoverridecommandlockouts    % to create the author's affliation portion
                % using \thanks

\textwidth 178mm    % <------ These are the adjustments we made 10/18/2005
\textheight 239mm   % You may or may not need to adjust these numbes again
\oddsidemargin -7mm
\evensidemargin -7mm
\topmargin -6mm
\columnsep 5mm

\setlength{\textfloatsep}{8pt plus 2pt minus 2pt}
\setlength{\intextsep}{8pt plus 2pt minus 2pt}


%TODO remove this to back to the original format
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage[colorinlistoftodos,prependcaption,textsize=tiny]{todonotes}
\usepackage{soul}


\newcommand{\notajj}[1]{\todo[size=\small,linecolor=green,backgroundcolor=green!90!white,bordercolor=purple,]{#1 \\ -- \footnotesize \color{purple} JJ}}

\newcommand{\notapedro}[1]{\todo[size=\small,linecolor=blue,backgroundcolor=blue!20!white,bordercolor=blue]{#1 \\ -- \footnotesize \color{blue} Pedro}}

\newcommand{\notaantonio}[1]{\todo[size=\small,linecolor=red,backgroundcolor=orange!20!white,bordercolor=red]{#1 \\ -- \footnotesize \color{orange} Antonio}}

\newcommand{\notamaribel}[1]{\todo[size=\small,linecolor=red,backgroundcolor=orange!20!white,bordercolor=red]{#1 \\ -- \footnotesize \color{red} Maribel}}

\definecolor{cvrivas}{rgb}{0.9,0.4,0.4}
\newcommand{\notavrivas}[1]{\todo[size=\small,linecolor=cvrivas,backgroundcolor=cvrivas!20!white,bordercolor=white]{#1 \\ -- \footnotesize \color{cvrivas} Victor}}

\definecolor{cfergu}{rgb}{0.2,0.5,0.9}
\newcommand{\notafergu}[1]{\todo[size=\small,linecolor=cfergu,backgroundcolor=cfergu!20!white,bordercolor=black]{#1 \\ -- \footnotesize \color{cfergu} Fergu}}

\definecolor{cpaloma}{RGB}{152,251,152}
\definecolor{cbpaloma}{RGB}{0,100,0}
\newcommand{\notapaloma}[1]{\todo[size=\small,linecolor=cbpaloma,backgroundcolor=cpaloma!20!white,bordercolor=cbpaloma]{#1 \\ -- \footnotesize \color{cbpaloma} Paloma}}

\definecolor{cgus}{RGB}{239,255,18}
\newcommand{\notagus}[1]{\todo[size=\small,backgroundcolor=cgus,bordercolor=cgus,linecolor=cgus]{#1 \\ -- \footnotesize Gustavo}}

\definecolor{ctares}{rgb}{0.1,0.1,0.1}
\newcommand{\notantares}[1]{\todo[size=\small,linecolor=gray,backgroundcolor=gray!30!white,bordercolor=black]{#1 \\ -- \footnotesize \color{orange} Antares}}

\newcommand{\notaruben}[1]{\todo[size=\small,linecolor=PineGreen,backgroundcolor=SeaGreen!30!white,bordercolor=PineGreen]{#1 \\ -- \footnotesize \color{PineGreen} Ruben}}

\newcommand{\notaimportante}[1]{\todo[size=\large,linecolor=PineGreen,backgroundcolor=SeaGreen!30!white,bordercolor=PineGreen]{#1 \\ -- \footnotesize \color{PineGreen} Ruben}}

\usepackage[paperwidth=297mm,
            paperheight=297mm,
            left=60mm,
            top=50pt,
            textwidth=178mm,
            marginparsep=10pt,
            marginparwidth=50mm,
            textheight=239mm,
            footskip=50mm]
           {geometry}

\begin{document}


% paper title: Must keep \ \\ \LARGE\bf in it to leave enough margin.

\title{\ \\ \LARGE\bf MADE and the Monomith}

\author{R.H. García-Ortega, P. Garc\'ia-S\'anchez, ... \thanks{Department of Computer Architecture and Technology, University of Granada, Spain, {\tt \{raiben,pablogarcia\}@ugr.es}}}
% avoiding spaces at the end of the author lines is not a problem with
% conference papers because we don't use \thanks or \IEEEmembership
% use only for invited papers
%\specialpapernotice{(Invited Paper)}

% make the title area
\maketitle

\begin{abstract}

The content industry needs a way to procedurally design interesting
story arcs that can
act as backstories for characters or as background for a massive
multiplayer world. MADE is a framework that uses genetic algorithms to
evolve worlds in which user-defined archetypes arise. 
In our previous work we have found that 
the existence of conflicts is essential
for the emergence of most archetypes. However, different archetypes
need different types of conflicts and, in many cases, conflicts are also
emergent, so in this paper we will present a general methodology for
setting the parameters and conditions of the actions that influence 
these conflicts for a particular virtual world.
\notaantonio{decir qué se va a probar exactamente: fitness, operadores, parámetros. ;)}
\end{abstract}


%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%   INTRODUCTION   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
\section{Introduction}
\label{sec:intro}
\notajj{Adaptar este abstract al contenido específico del paper}
In the last few years, procedural content generation (PGC) 
is attracting more and more interest in the area of videogames development.
Different productions, where PGC is applied, are winning international awards for the first time, proving that this methodology can also be an added value due to the re-playability and richness of the result, attributes very appreciated by the videogames players.
To give an example, No man's sky, an adventure videogame where planets, fauna and flora are created procedurally, won several Game Critics Awards in the past E3 2014\footnote{\url{http://www.gamecriticsawards.com/winners.html}}.

According to the classification by Hendrikx et Al. \cite{Hendrikx:2013:PCG:2422956.2422957}, PGC can be applied to many different areas in videogames, such as derived content, design, scenarios, systems, space or game units. This paper is focused in the creation of scenarios, and more specifically in the backstories of the non-player characters (NPC) in massive worlds, that would be used to provide realism, create an interesting atmosphere and allow the appearance of possible secondary goals supported at the NPCs' actions in the past.

\notaantonio{¿qué quiere decir esto de los objetivos secundarios?. Aclararlo}
\notaruben{Básicamente que esas backstories también podrían usarse para generar objetivos secundarios del juego. Si queda claro, eliminar comentario y si no, proponer}

In this context, and following the work by Garc\'ia-Ortega et Al. \cite{garcia14my},
\notaantonio{Si nos vamos a ¡apoyar' en conclusiones o cosas hechas en artículos anteriores, mejor anonimizarlo y usarlo así. ;)}
\notaruben{El tema es que no estamos diciendo que sea trabajo así que el doble ciego no queda invalidado... ¿Qué opináis?}
creating backstories using a hybrid \textit{Evolutionary Computation - Agent-Based Model} approach (EC-ABM) have proved to work in virtual words where agents with particular personalities or \textit{profiles} live in a \textit{map} and interact in a \textit{space-time} dimension, leading to the emergence of high level behaviors or \textit{archetypes}.
These archetypes are selected by the designer  
\notaantonio{explicar cómo y cuándo se seleccionan. ;)}
of the videogame depending of the setting needs, before the evolutionary
algorithm is executed. The solution obtained encodes the profile of the agents whose lives would show the desirable archetypes when they are placed in the virtual world.

That work showed that sensible non-evolutionary parameters as the number of agents, the world size, the execution time, or the source of conflicts affect dramatically to the quality of the solution yielded by the EC-ABM approach.
We will say that the quality of a solution is directly proportional to the emergence of archetypes, although this asseveration will be discussed in Section \ref{sec:exp}.
\notafergu{Intenta no mandar al lector al futuro}
Thus, the appearance of conflicts promotes the appearance of archetypes, hence, better solutions.

In this paper, we focus on these conflict-based archetypes and classify them based on their relation to the source of conflict, allowing the creator of a story to promote their appearance by tuning the parameters of the evolutionary algorithm (EA).
Also, different conflict-based patterns extracted from classical literature are described, designed and used in the experiments. 

In order to implement these archetypes, the MADE open source simulator\footnote{\url{http://made.velonuboso.com}} is used. In MADE, every individual of the evolutionary algorithm is modeled with a chromosome that represents the parameters of one (or several kinds of) finite state machine (FSM) \cite{FSM_Booth} that is set to \textit{live} (interact) in a simulated environment.

On the other hand, promoting different archetypes relies in an appropriate fitness function for a virtual world, but also in the operators and the EA parameters chosen.
In this paper we propose and test different approaches 
based in
\notaantonio{aclarar de qué son los 'approaches'. ;D}
\notaantonio{¿properties of?}
the archetypes of the agents that inhabit the world, their speed of apparition and their distribution,
\notaantonio{decir exáctamente las que se usen. Lo de ETC no queda nada bien, pero es que aquí es importante señalar las que se hayan considerado y justificarlas, claro. ;)}
selecting those that generate better solutions in the experiments performed.
\notaantonio{Antonio - ¿Estos experimentos se refieren a los del artículo anterior o a este? Si es a este, deberías dar más énfasis a ese 'selecting'. ¿En base a qué se seleccionarán? ¿qué son 'better solutions'? Se hará algo más que seleccionarlas, ya que se justificarán y se analizarán, supongo. ;)}
\notaantonio{En general hay que darle más bombo al 'selling point', justificarlo mejor (por qué es este el siguiente paso y no otro, por ejemplo) y explicar mejor lo que se va a hacer (que es una metodología, que pretende falicitar las cosas a tales personas y por tal medio, etc). ;)}

Summarizing, in this work a EC-ABM system has been used to give an answer to the following questions:
\begin{itemize}
 \item Is it possible to describe sources of conflicts using a formal predicates logic? %Demostrar que la metodología funciona
 \item How the distribution of archetypes affect the quality of a story? %Lo de las distintas funciones fitness para ver cual es mejor
 \item Is there any difference between ...? %Algo más que queramos demostrar?

\end{itemize}
\notafergu{@raiben mira a ver si estas preguntas nos sirven para demostrar lo que queremos en este artículo, reescríbelas y dejarlo claro claro. Luego podemos usarlas en las conclusiones}

The rest of the paper is organized as follows. Coming up next, we present the state of the art in the definition, classification and evaluation
of conflict-based archetypes. The next section (Section \ref{sec:met}) presents the methodology, 
\notaantonio{La metodología para hacer qué?}
followed by the experimental setup in Section \ref{sec:exp}, whose results are shown and analyzed in Section \ref{sec:res}. Finally, we present our conclusions and future work.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{State of the Art}
\label{sec:sota}

\notajj{Si este estado del arte está más avanzado que el anterior, se
  puede conservar}
%According to the taxonomy described by Togelius et al. \cite{togelius2011search}
%the problem of massively generating backstories for non-player
%characters (NPCs) can be considered \textit{Procedural content
%generation (PCG)}, since it implies the generation of the characters and their relations in the game world. In this paper,
%we have used an \textit{offline} approach since the computation is
%done in the phase of game design, also considered \textit{search-based} due to the use of an evolutionary algorithm.
%This paper is focused in the context of computational generation of massive plots without human interaction, and driven by goals proposed by the creator. Different approaches have been proposed in previous works (see the work of Arinbjarnar et al. \cite{arinbjarnar2009critical} for a survey). 
%
%In 1976 the program called \textit{Tale-Spin} \cite{meehan1976metanovel} was able to produce
%purely text-based fairy tales where semi-autonomous characters
%showed emotions and relationships, with the shortcoming of creating very inconsistent plots.
%Then, different researches used the concept of \textit{goals and pre-defined
%stories} to construct stories: In 1987, UNIVERSE \cite{lebowitz1985story}
%was used to create infinite soap opera style stories driven by
%goals provided by the author. It used fragments of stories to assign
%roles to stereotypical characters, relying on the reader the assumption
%of the characters' motivations.
%In 1994, Turner created Minstrel \cite{turner2014creative}, a program which used 
%case-based reasoning to generate stories about knights and ladies by replacing variables in existing stories and recombining them. It also used goals, in this case for the story and for every character. In 2008, Riedl and Leon
% used in \cite{riedl2008toward} the same idea, conceptualizing a vignette
%as a small story assumed as `interesting', thus they can compose complete stories when exposed sequentially.
%
%The technique applied in this paper can be understood as the evolution of
%these researches adapted to massive worlds, where coherence is provided by the use of an Agent-Based Model (ABM for further references).
%Instead of using `vignettes' to construct stories, our approach
%modifies the behavior of the agents and finds `archetypes', i.e. behaviors and patterns universally accepted and present in the
%collective imaginary \cite{garry2005archetypes}.
%
%The idea of emerging plots from agents' interactions, that is, using
%agent-based models of the world to generate stories is not new. In 2007, Virtual storyteller \cite{swartjes2007emergent}, used agents that improvise using techniques from improvisational theater, a plot guide and a narrator. Our technique uses the same approach but there is no plot guide agent. Instead, a Genetic Algorithm (GA)  guides the mood of the backstories created by finding `archetypes' (selected by the user).
%
%The search of a good plot can be addressed from the Evolutionary Computation (EC) point of view. To this aim in 2011, Nairat et al. proposed in \cite{nairat2011character} a generative drama approach
%that integrates human creativity by using an agent-based system where
%the characters are developed using interactive evolution. One year later, 
%Cioffi-Revilla et al. \cite{cioffi2012evolutionary} published a study that
%applies a combined EC-ABM approach to the challenge of understanding
%complex adaptive systems in social science. Their conclusions suggest further applications of EC to ABM in terms of multi-population models with heterogeneous agents, multi-objective optimization, dynamic environments, and evolving executable objects for modeling social change.
%
%Our approach relies on this idea by using a GA to 
%obtain the agents' life story that better fits the goals described by the user/author before the world is generated. It follows the methodology presented in \cite{garcia14my}: systematize the generation of backstories in massive worlds, defining the elements of a complex world, and optimize the characters' behavior using GAs to extract information.
%Moreover, that work included a preliminary analysis of only one parameter: the number of profiles to use. Results in that paper shown that this parameter have a significant influence
%in the archetype-based fitness attained. The open-source simulator 
%MADE used in the present work, was also introduced in that paper. However, the rest of parameters that conform the fictional setting (defined in 
%\cite{morrell2006between}) were set as standard ad-hoc parameters. 
%
%
%In this research, we want to extend the previous study testing the rest of the
%parameters that model a story: the time, the world, the characters and
%the source of conflicts.
%These parameters might have a huge effect in the plot generation, where small variations could substantially alter the results, or on the other hand, some of them may be superfluous.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Methodology} %Issue #12
\label{sec:met}

The importance of finding a proper way of detecting the archetypes in a virtual world relies in the fact that it is the basis of the fitness function in a Genetic algorithm that promotes the appearance of them.
\notafergu{Quién dice esto, por qué es importante?} 
According to the work by Garc\'ia-Ortega in \cite{garcia15how}, systematic tests on the parameters of the virtual world show that conflicts are essential for the drama emergence. On this basis, we propose a methodology to formally define a conflict and under which circumstances a virtual world can offer it. Then, this formal definition inspire a 3-layered EC-ABM model for archetypes that is implemented following the experimental setup in section~\ref{sec:exp}.

In the present paper, the conflict, as element of vital importance for the drama generation, is studied through the \textit{monomyth}, a basic pattern that its proponents argue is found in many narratives from around the world. Joseph Campbell in \textit{The Hero with a Thousand Faces}~\cite{faces} summarizes it as ``A hero ventures forth from the world of common day into a region of supernatural wonder: fabulous forces are there encountered and a decisive victory is won: the hero comes back from this mysterious adventure with the power to bestow boons on his fellow man''. Vogler in \textit{The hero's journey}~\cite{journey} defines the following archetypes present in the \textit{monomith}:

\notaruben{Cambiar estas definiciones, que además de ser informales, fueron sacadas de internet}

\begin{enumerate}
\item Heroes: Central figures in stories.  Everyone is the hero of his or her own myth.
\item Shadows: Villains and enemies, perhaps the enemy within.  The dark side of the Force, the repressed possibilities of the hero, his or her potential for evil.  Can be other kinds of repression, such as repressed grief, anger, frustration or creativity that is dangerous if it does not have an outlet. \notafergu{Todas estas movidas de las cosas oscuras sirven para el paper?}
\item Mentors: The hero's guide or guiding principles.  Yoda, Merlin, a great coach or teacher.
\item Herald: One who brings the Call to Adventure.  Could be a person or an event.
\item Threshold guardians: The forces that stand in the way at important turning points, including jealous enemies, professional gatekeepers, or your own fears and doubts. %FERGU: your own?
\item Shapeshifters: In stories, creatures like vampires or werewolves
  who change shape.  In life, the shapeshifter represents
  change. \notajj{Change or flow?}
 The way other people (or our perceptions of them) keep changing.  The opposite sex, the way people can be two-faced.
\item Tricksters: Clowns and mischief-makers, Bugs Bunny and Daffy Duck, Richard Pryor and Eddie Murphy.  Our own mischievous subconscious, urging us to change.
\item Allies: Characters who help the hero through the change.  Sidekicks, buddies, girlfriends who advise the hero through the transitions of life.
\end{enumerate}

Using basic textual analysis, \notajj{What is this}
 we can observe that three elements are
essential for the journey to be present: the \textit{hero}, the
\textit{goal} (the conflict with the \textit{shadow}) and the
\textit{pass of time}. All the other roles exist in the story only to
interact this the hero in some way. 

A virtual world may provide information about the agents or elements
that exist in it and the different events that have occurred, but from
the point of view of the archetype search, we are not interested in
what kind of events are considered \textit{conflicts}: we only need
the world to provide what elements had a conflict in a given moment,
in other words, to provide basic facts in a formal way. Later on, in
an upper layer, we can create a logic that use these facts to reason
and find archetypes that are independent to the world
implementation. To formalize this logical reasoning we will use
predicate logic, a formal system based in predicates and quantified
variables that can be programmed with a declarative paradigm. The
figure~\ref{fig:predicates} illustrates the reasoning structure for
the archetypes present in \textit{The Hero's Journey}.  

\notaruben{Estaría bien encontrar algún paper que ya haya usado
  razonamiento formal para buscar patrones} \notajj{Igual puedes
  mirarte esto \url{http://dl.acm.org/citation.cfm?id=1321473} o
  \url{http://www.csdl.tamu.edu/~furuta/courses/06c_689dh/dh06readings/DH06-237-239.pdf},
aunque no sé si será central a tu tesis o no.}

We propose the following set of base predicates \notajj{Out of the blue?}
that the implementation of the virtual world may provide. They have to be expressed in terms of elements (agents, objects or even concepts that can interact with the archetypes) and times.

\begin{enumerate} 
\item $Element(i)$: $true$ if $i$ is an element of the virtual world. Conceptually, an element can be an agent, a thing or a concept.
\item $Time(t)$: $true$ if $t$ is moment in the life of the virtual world.
\item $Conflict (i_1, i_2, t)$: $true$ if a conflict between the element $i_1$ (the victorious) and the element $i_2$ (the loser) occurs in an specified moment $t$.
\item $Before(t_1,t_2)$: $true$ if the moment $t_1$ comes before the moment $t_2$.
\item $Immediate(t_1,t_2)$: $true$ if the difference between the moments $t_1$ and $t_2$ is short (this value will depend on the world passage of time).
\notafergu{Como se define la inmediatez en este predicado?}
\item $MoreEvil(i_1, i_2, t)$: $true$ if the element $i_1$ if considered as ``more evil'' than the element $i_2$ in the moment $t$. AS we will see, after the journey, the hero has to overcome the shadow, and in our design, the shadow has to be more ``evil'' than the hero in any way. Other designs may let the final reader decide the moral lineup of the shadow character, reaching situations where the hero could be seen as the evil and the shadow as the good one.
\item $Wiser(i_1, i_2, t)$: $true$ if the element $i_1$ if considered as ``wiser'' than the element $i_2$ in the moment $t$.
\item $Helps(i_1,i_2,t)$: $true$ if the element $i_1$ guides or helps someway the element $i_2$ in the moment $t$.
\item $Encourages(i_1,i_2,i_3,t)$: $true$ if the element $i_1$ encourages the element $i_2$ to fight against the element $i_3$ in a moment $y$.
\item $Accompanies (i_1,i_2,t_1,t_2)$: $true$ if the element $i_1$ stays near the element $i_2$ from the moment $t_1$ to the moment $t_2$.
\item $Trickier(i_1, i_2 ,t)$: $true$ if the element $i_1$ if considered as ``trickier'' or ``funnier'' than the element $i_2$ in the moment $t$.
\end{enumerate}

The presence of a set of these predicates can provide a set of archetypes. If the world is able to provide the full set, then all the archetypes may be found, although their appearance will depend on the world implementation, its properties and the behavior of the agents.

The non-world-dependent predicates that define the archetypes are described bellow and a graph of dependencies between archetypes is shown in figure~\ref{fig:predicates}.


\begin{figure}
        \centering
        \includegraphics[width=8.7cm]{imags/predicates.pdf}
        \label{fig:predicates}
        \caption{Graph of dependencies between predicates}
\end{figure}

\begin{enumerate}
\item $
\forall i_1, \forall i_2, \forall t_1, \forall t_2 \mid\\
(Element (i_1) \wedge Element (i_2) 
\wedge Time (i_1) \wedge Time (i_2)\\
\wedge Before (t_1, t_2) \wedge Conflict (i_2, i_1, t_1)\\
\wedge Conflict (i_1, i_2, t_2) \wedge MoreEvil (i_2,i_1,i_3))\\
\Rightarrow Journey (i_1, i_2, t_1, t_2)
$
\item $
\forall i_1, \forall t_1, \forall t_2, \exists i_2 \mid\\
Journey (i_1, i_2, t_1, t_2) \Rightarrow Hero (i_1, t1_1, t_2)
$
\item $
\forall i_1, \forall t_1, \forall t_2, \exists i_2 \mid\\
Journey (i_2, i_i, t_1, t_2) \Rightarrow Shadow (i_1, t1_1, t_2)
$
\item $
\forall i_1, \forall i_2, \forall t_1, \forall t_2, \forall t_3, \forall t_4 \mid\\
(Hero (i_1, t_1, t_2) \wedge Accompanies (i_2, i_1, t_3, t_4) \wedge \\ Before(t_1,t_3) \wedge Before (t_3,t_4) \wedge Before(t_4,t_2) \wedge \\ Wiser(i_2,i_1) \wedge Helps(i_2,i_1))\\
\Rightarrow Mentor (i_2, i_1, t1_1, t_2)
$
\item $
\forall i_1, \forall i_2, \forall i_3, \forall t_1, \forall t_2, \forall t_3 \mid\\
(Journey (i_1, i_2, t_1, t_2)\wedge Before(t_1,t_3) \wedge\\
Immediate(t_1,t_3) \wedge Encourages(i_3, i_1, i_2, t_3))\\
\Rightarrow Herald (i_3, i_1, t1_1, t_2)
$
\item $
\forall i_1, \forall i_2, \forall t_1, \forall t_2, \forall t_3, \forall t_4 \mid\\
(Hero(i_1, t_1, t_2)\wedge Before(t_1,t_3) \wedge\\
Before(t_3,t_2) \wedge Conflict(i_1, i_3, t_3))\\
\Rightarrow Guardian (i_3, i_1, t1_1, t_2)
$
\item $
\forall i_1, \forall i_2, \forall t_1, \forall t_2, \exists t_3 \mid\\
(Hero (i_1, t_1, t_2) \wedge Accompanies (i_2, i_1, t_1, t_2) \wedge \\ Before(t_1,t_3) \wedge Before (t_3,t_2) \wedge \\
Helps (i_2,i_1, t_3)) \Rightarrow Allied (i_2, i_1, t_1, t_2)
$
\item $
\forall i_1, \forall i_2, \forall t_1, \forall t_2, \exists t_3, \exists t_4 \mid\\
(Hero (i_1, t_1, t_2) \wedge Accompanies (i_2, i_1, t_3, t_4) \wedge \\ Before(t_1,t_3) \wedge Before (t_3,t_4) \wedge Before(t_4,t_2) \wedge \\ Trickier(i_2,i_1)) \Rightarrow Trickster (i_2, i_1, t_1, t_2)
$
\item $
\forall i_1, \forall i_2, \forall i_3, \forall t_1, \forall t_2, \forall t_3 \mid\\
((Journey(i_1,i_2,t_1,t_2)\\
\wedge\\ Before(t_1,t_3) \wedge Before(t_3,t_2))
\wedge\\
(
(Mentor(i_3,i_1,t_1,t_3) \wedge Herald(i_3,i_1,t_3,t_2)) \vee\\
(Herald(i_3,i_1,t_1,t_3) \wedge Mentor(i_3,i_1,t_3,t_2)) \vee\\
(Mentor(i_3,i_1,t_1,t_3) \wedge Guardian(i_3,i_1,t_3,t_2)) \vee\\
(Guardian(i_3,i_1,t_1,t_3) \wedge Mentor(i_3,i_1,t_3,t_2)) \vee\\
(Mentor(i_3,i_1,t_1,t_3) \wedge Allied(i_3,i_1,t_3,t_2)) \vee\\
(Allied(i_3,i_1,t_1,t_3) \wedge Mentor(i_3,i_1,t_3,t_2)) \vee\\
(Mentor(i_3,i_1,t_1,t_3) \wedge Trickster(i_3,i_1,t_3,t_2)) \vee\\
(Trickster(i_3,i_1,t_1,t_3) \wedge Herald(i_3,i_1,t_3,t_2)) \vee\\
(Herald(i_3,i_1,t_1,t_3) \wedge Guardian(i_3,i_1,t_3,t_2)) \vee\\
(Guardian(i_3,i_1,t_1,t_3) \wedge Herald(i_3,i_1,t_3,t_2)) \vee\\
(Herald(i_3,i_1,t_1,t_3) \wedge Allied(i_3,i_1,t_3,t_2)) \vee\\
(Allied(i_3,i_1,t_1,t_3) \wedge Herald(i_3,i_1,t_3,t_2)) \vee\\
(Herald(i_3,i_1,t_1,t_3) \wedge Trickster(i_3,i_1,t_3,t_2)) \vee\\
(Trickster(i_3,i_1,t_1,t_3) \wedge Herald(i_3,i_1,t_3,t_2)) \vee\\
(Guardian(i_3,i_1,t_1,t_3) \wedge Allied(i_3,i_1,t_3,t_2)) \vee\\
(Allied(i_3,i_1,t_1,t_3) \wedge Guardian(i_3,i_1,t_3,t_2)) \vee\\
(Guardian(i_3,i_1,t_1,t_3) \wedge Trickster(i_3,i_1,t_3,t_2)) \vee\\
(Trickster(i_3,i_1,t_1,t_3) \wedge Guardian(i_3,i_1,t_3,t_2))
)\\
\Rightarrow Shapeshifter (i_2, i_1, t_1, t_2)
$
\end{enumerate}

\notafergu{Afu, es un poco complicao esto del shapeshifter, no? Explica si puedes cada arquetipo por separado o ponlo como figura para hacerle referencia}



%This study will lead us to define fitness functions (evaluation layer) that rely in the definition of abstract archetypes (abstract archetypes layer) expressed as logical predicates. These archetypes do not depend on the world implementation, but in base or primitive predicates that the virtual world may implement (implementation layer).

%This approach allows us to classify the virtual worlds in terms of the base predicates they offer, and thus, in terms of the archetypes that could emerge with an hybrid EC-ABM approach.

%We will use Predicate Logic to present the abstract archetypes layer and the implementation layer.
%\notafergu{Por qué la usamos? This is interesting because PEPICO says that... por ejemplo}

%\notaruben{WIP: Pendiente buscar una referencia a esto y reescribirlo. Lo que hay es de la wikipedia}



As an evolution of the methodology described in \cite{Amethodology} and \cite{garcia14my}, we present a 3-layered model, shown in figure~\ref{fig:3layers}, based in the hybrid EC-ABM approach where imperative an declarative paradigms are applied:

\begin{figure}
        \centering
        \includegraphics[width=8.7cm]{imags/methodology_layers.pdf}
        \label{fig:3layers}
        \caption{3-layered model}
\end{figure}

\notafergu{Explica cada caja. Puedes usar listas si quieres xD}

\begin{itemize}
\item Implementation layer: This is the base layer, as it provides the mechanisms for...
\item Abstract archetypes layer: Built in the previous one, the archetypes are...
\item Evaluation layer: this layer...
\end{itemize}

\notafergu{explicar las funciones fitness en general, cómo se define una función fitness, como saber si una función fitness es de calidad y luego en el experimental setup describirlas (vamos, las estaba describiendo yo ahora abajo xD)}
\notaruben{ok, WIP}


%As mentioned in section \ref{sec:sota}, the proposed technique for generating fictional worlds 
%relies in the use of a a combined EC-ABM approach (a GA in this case).
%The fitness function is configurable to fit the story needs.
%Then, some parameters have to be fixed: world constants, agents' constants and GA parameters.
%Finally, the GA has to search in a noisy space, due to the stochastic nature of the approach.
%The influence of each constant and parameter is, \textit{a priori}, impossible to predict.
%
%Our methodology systematizes the study of key parameters in the massive generation of backstories with an
%EC-ABM approach
%in order to optimize the resources allocated to evolution and to have some
%guarantees that the final result will be close to the optimum.
%
%\subsection{Problem characterization}
%\label{subsec:idio}
%
%
%This methodology  addresses to problems with the following characteristics:
%
%\begin{enumerate}
%\item Goal: The final goal is to generate stochastic virtual worlds massively inhabited by characters with backstories that are aligned with a mood defined by the writer.
%\item Virtual world: The virtual world is modeled by the ABM.
%\item Archetype: An archetype is a behavior pattern that can be present in a backstory.
%\item Fitness: The evaluation of the virtual world can be based in the rates of archetypes (set by the writer) found in the characters that inhabit it.
%\item Backstory: The backstory of a character is a set of actions and interpretations, coherent with the virtual world and the other agents.
%\item Agent: The agent represents a character that performs actions in the virtual world depending on the neighborhood and its internal state.
%\item Profile: The agents can be parametrized and their behavior
%  (probabilities to perform actions) depends on these parameters. The
%  profile (P) is the set of values for these parameters and is
%  optimized by the GA. 
%\item Conflict: Every action is performed in a place and a time,
%  affects to one or more agents and relates to the source of conflict.
%\item Place: The agents occupy a location in a map, defined by its size (W).
%\item Time: The world exists during a period of time (D). Every backstory is fed by actions as time goes by, in a bottom-up approach.
%\item Source of conflict: The element that forces the agents to interact. For example, in this study, the food (F) can be considered as the source of conflicts between the agents; the element that the agents compete for.
%\item Scenario: A set of archetypes that have to emerge.
%\end{enumerate}
%
%
%\subsection{Parameter effects}
%\label{subsec:params}
%
%As Morrell explains in \cite{morrell2006between}, ``fiction has three main elements:
%plotting, character, and place or setting'', so, intuitively, these three elements can affect the backstories. 
%In our problem, an agent is ruled by its profile, which defines its behavior.
%Our technique uses the GA to evolve the profile(s) of the agents,
%so it will be part of the search space.
%Nevertheless, the use of different number of profiles (P) may also affect the behavior of the agents, since more profiles
%in the same world may imply new types of conflicts (as it was demonstrated in \cite{garcia14my}).
%
%The plotting is the result of the different conflicts, that are affected by the place,
%the time and the source of conflicts, which in this case is the food.
%
%The place is defined by the size ($W$). Smaller maps usually imply more friction between the agents,
%thus different variations of $W$ may derive in different behaviors. The values that should be chosen
%are those that test a size smaller or equal to the neighborhood defined (letting all the agents
%access to all the resources and positions of the world), a size bigger than the neighborhood
%(forcing the agents to move to reach a new neighborhood) and much bigger (showing the effects
%of having a big inhabited world).
%
%The time of the conflict is affected by the period of time that the world is given to run (D).
%In this sense, a longer period of time will usually imply more interactions, \textit{ergo} more
%archetypes and better fitness, and eventually more agents in the world. In the other hand, the evaluation
%of an individual in the GA implies the execution of every agent and the evaluation of each backstory,
%thus more agents and bigger backstories may increment significantly the evaluation time.
%The values proposed for the study vary from a very short period of time to a bigger one, where the
%maximum is the agent's average lifetime. The food is modeled with the parameter (F). Changes in this parameter may increment or decrease
%the number of interactions.
%
%Finally, exploration of the search space might be affected by the GA parameters. In this sense, the most significant
%parameter is the population size (S), since bigger populations will provide more accuracy but spend more execution time.
%
%To sum up, our methodology will systematically combine more than two variants of five parameters
%and study how the fitness is affected. The parameters proposed for the problems characterized in
%subsection \ref{subsec:idio} are the number of profiles (P), the world size (W),
%the virtual time (D), the food (F) and the population size of the GA (S).
%
%
%
%\subsection{Problem specification}
%
%
%
%An agent in the MADE world is a representation of a brown rat
%modeled as a finite automaton that performs actions like move, eat, attack,
%defend, escape, find mate or breed.
%
%The place where the conflicts appear is a square grid. A cell can only be occupied by one agent.
%Each agent can move and interact with other agents in a neighborhood of 7x7 cells around the rat. 
%The time is a number of `virtual days'.
%The rats are driven to survive and to have offspring, thus
%the source of conflicts is the food: 
%agents attacks themselves to steal food before it is eaten by 
%other agents. Systematically, a number of food rations appears in random positions on the map every virtual day.
%An agent may die of starvation, due to the damage inflicted by other agent or
%because its older.
%
%
%MADE lets the writer select different archetypes that can be promoted in the world
%as described in \cite{garcia14my}.
%In this paper we will study three different archetypes: An agent
%is considered a \textit{villain} if it kills other agent as a result of a fight for the food,
%a \textit{hero} if it attacks a \textit{villain} and an
%\textit{avenger} if it attacks other agent in revenge.
%
%The fitness of the world is the sum of the value for each archetype rate, i.e. 
%the number of characters that present the archetype divided by the total number of characters.
%To promote the appearance of all the archetypes, avoiding as much as possible the 
%lack of any of them, the function presents a logarithmic curve where
%small rates get bigger values. As a consequence, the fitness of a world with a
%presence of two archetypes whose rate is 0.25 is bigger than the fitness of a world
%with one archetype whose rate is 0.5.
%The function used by MADE is described as: 
%
%
%\begin{equation}
%F_A= \sum _{i=1}^{A} {{\log \left( 1+10r_{i}\right) } \over {\log 11}},F_A\in\left[0,A\right]
%\end{equation}
%
%\noindent where $A$ is the number of archetypes that takes part in the fitness and $r_{i}$ is the
%appearance rate of the archetype $i$ in the world, being $r_{i} \in \left[ 0 , 1 \right]$.
%
%
%\subsection{Converting logs to stories}
%
%Once the best values of the parameters have been found, the system can be run
%inside a game context to generate a whole set of secondary characters.
%For the simple reason of using agents in a bottom-up approach for the world generation, MADE provides a social network with family relationships, but also other related to the disputes and to possible archetypes, i.e. in our study, a `hero' fights a `villain' or an `avenger' takes revenge on other character.
%
%The storyteller will be able to tell a story about each character by accessing to its life-log. The life-log should have a pre-defined format understandable by the storyteller, with fields like the date, the action performed, the internal state, the direct object and the indirect object.
%Moreover, each agent should be tagged with the different archetypes it fulfills, the days that this archetype begins and ends, and the agents affected.
%
%With this information within reach, the storyteller can create a story about the character by narrating its birthday, its name, the name and story of its parents, siblings and children (also using this technique for describing them), what the agent is (as archetype: `villain', `hero', `avenger') and why (dates, characters related and supposed motivations).

\section{Experimental setup}
\label{sec:exp}

%TODO Pequeña introducción
%TODO ¿En qué consistirán los tests? ¿Qué objetivos buscamos? (Explorar el espacio de soluciones?)
%TODO Características de las ejecuciones. 
%TODO   Parámetros fijos del mundo (resultados del paper anterior) OK
%TODO   Parámetros del GA. Fijos y variables. ¿Por qué? 
%TODO   Fitness a evaluar
%TODO     Detección de Arquetipos. Explicar los 12 tropos de Romeo y Julieta
%TODO     Cálculo del fitness de la solución. EXPLICAR AQUÍ EL FITNESS
%TODO Nº de ejecuciones: 30
%TODO Análisis que se realizarán sobre los datos

As the objective of this paper is to demonstrate that a conflict-based archetypes TODO, we propose an experimental setup that applies the proposed methodology to generate a virtual world following the BLABLA. We also propose a metric to measure the ``interest'' of a story. 

\subsection{Fitness comparison and metric of interest} %TODO buscar un nombre guay para la métrica
In previous section we defined the fitness function as... %TODO terminar cuando @raiben defina lo del fitness arriba 

As it is difficult to measure the ``interest'' of a story using a function we propose of use the metric, called COMOSELLAMA, based in the number of conflicts by agent. Note that this metric is used to measure the quality of the proposed fitness functions, and it does not make sense to use it directly as a fitness function, as it can not distinguish between different archetypes.

We are going to compare three different fitness:
\begin{itemize}
\item \textit{Number of archetypes} (NA): This function just counts the number of archetypes of the world after their execution.
\item \textit{Distribution of Archetypes} (DA): Takes into account the presence of different archetypes. For example, generating 1 Villain and 1 Hero is better than generate 2 villains.
\item \textit{Distribution of Archetypes in different agents} (DDA): As the architecture of MADE allows that an agent can be different archetypes at the same time we will prioritize the appearance of different archetypes in different agents. For example, is better to generate ``Fred the Hero'' and ``Bob the Villain'' than ``Fred the Hero and Villain'' and ``just Bob''.
\end{itemize}
\notafergu{Donde está lo del tiempo de aparición aquí?}

These fitness functions have different behaviors, and it is 

The example to model in this study is the classic literary story ``Romeo and Juliette'', by William Shakespeare.
Following the analysis available in \ref{RomeoJuliet_tvtropes}, this story present
at least 12 tropes. The summary plot is provided in terms of tropes: ``\textit{Boy Meets Girl}. It's \textit{Love at First Sight}. But Boy and Girl are members of \textit{Feuding Families}. \textit{Boy secretly marries Girl}. Boy's friend is murdered by Girl's cousin, so \textit{Boy kills Girl's cousin}, then skips town. Girl agrees to \textit{dangerous plot} to avoid an \textit{Arranged Marriage} set up by her parents. Plot \textit{goes horribly right}. Boy, hearing of Girl's `death', returns to town and \textit{kills self} at her grave. Girl, \textit{waking and discovering this}, \textit{kills self} in turn. \textit{Grief-stricken families reconcile}. \textit{The End}!''.
\notafergu{Esto es un poco follón, lo pondría sin tantos cambios de formato}

\subsection{Methodology application, environment, algorithm and parameter configuration}



The MADE environment \cite{garcia14my}, described in the State of the Art, will be used. TODO EXPLICAR MAS MADE As explained in that paper the evaluation of an individual in the GA implies the execution of every agent and the evaluation of each backstory. 

In this paper we will use the MADE world's parameter configuration that obtained the best results in terms of archetype generation in the study presented in \cite{garcia14evostar}. The best combination of parameters was the smallest map size (5x5), the bigger number of virtual days (256), the fewer rate of food (1/8 of the number of cells), the lower number of profiles (1) and the bigger population size of the GA (256). The same GA used in that paper will be used to test the different fitness functions. A summary of the parameters to use are shown in Table \ref{tab:parameters}.

\begin{table*}
\begin{center}
\begin{tabular}{|c|c|}
\hline
{\em Parameter} & {\em Values} \\\hline \hline
%\multicolumn{2}{|c|}{Parameters under study} \\ \hline \hline
Number of profiles (P) & 1, 3 or 6 \\\hline %TODO si da tiempo
Number of virtual days (D) &   256 \\ \hline
World dimension (W) &  5x5\\ \hline
Food (F) & 1/8 \\ \hline
GA population size &  256 \\ \hline
%\multicolumn{2}{|c|}{Fixed parameters} \\ \hline \hline
Mutation probability & 1/12 per gene \\ \hline
Parent pool size & Same as pool size \\ \hline
Selection method & Binary tournament \\ \hline 
Elite & 10\%  \\ \hline
Replacement method & Generational\\ \hline
Re-evaluation of individuals & yes \\ \hline
Stop condition & 30 generations without improving the best individual found\\ \hline
Runs per configuration & 30 \\  \hline
Initial world population & 15 \\ \hline
\end{tabular}
\caption{Parameters used in the experiments.}
\label{tab:parameters}
\end{center}
\end{table*}


%As explained in subsection \ref{subsec:params}, the parameters 
%whose effect will be studied are the number of profiles (P), the world size (W),
%the virtual time (D), the food (F) and the population size of the GA (S).
%Different parameter values for each element will be studied to clarify
%their influence in the literary world generation, following the rules and 
%recommendations presented in subsection \ref{subsec:params}.
%
%Since the size of the neighborhood is a square of 7x7 cells, the selected
%values for (W) are 5x5, 10x10 and 20x20 cells. Furthermore, these sizes would
%allow the existence of 25, 100 and 400 agents
%respectively at the same time.
%
%Also, as the maximum lifetime of the agent is about 300 virtual days,
%the selected set of days (D) to study are 64, 128 and 256. More days would result in a
%huge amount of agents and backstories, harder to evaluate.
%
%
%
%The set of values for the food (F), or source of conflicts, that conditions the actions
%(attack, share and defend, among others) are 1/2, 1/4 and 1/8 of the number of cells of the map.
%
%The set of values proposed for the population size (S) 
%of the GA are 64, 128 and 256 individuals.
%
%Finally, it is expected that the existence of different number of profiles (P)
%in the world will have a significant effect in the runs, 
%specially in functions that require more than one archetype.
%We will compare the usage of 1, 2, 4 and 8 profiles for each scenario.
%As the usage of different number of profiles generate different
%individual sizes, and therefore different convergence times, the stop
%condition will be established depending of the best fitness 
%(30 generations without improvement), to do a fair comparison.
%
%For a more complete knowledge of the search space and the parameters effects, 
%three different scenarios will be studied:
%\begin{itemize}
%\item $S_1$: Maximization of the `villain' archetype ($A=1$).
%\item $S_2$: Maximization of the `villain' and the `hero' archetypes ($A=2$).
%\item $S_3$: Maximization of the `villain', the `hero' and the `avenger' archetypes ($A=3$).
%\end{itemize}
%
%Table \ref{tab:parameters} summarizes all the configuration parameters that will be compared (with their acronyms used in this paper),
%and the rest of the (fixed) parameters of the algorithm. The rest of the parameters of the MADE environment, such as the initial number of agents in the world, and the agent's parameters (such as the lifespan) are described in \cite{garcia14my}. In this paper we will use their default values as, in principle, they are not related with the aspects that model a story.
%








%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Experiments and Results}
\label{sec:res}
\notajj{Esta se puede suprimir entera}

%In this paper, 9720 runs were carried out for each problem/scenario (30 times * 4 levels for \emph{P} * 3 levels for \emph{D} * 3 levels for \emph{W} * 3 levels for \emph{S} * 3 levels for \emph{F} that represent the possible combinations) to obtain the fitness for each combination.
%
%Since the Kolmogorov-Smirnov test determines that the data we are using
%does not follow a normal distribution, a non-parametric test, the Kruskal-Wallis test, has been
%performed. 
%The response variable used to perform the statistical analysis is the
%fitness at the end of each run. 
%
%The tables obtained by Kruskal-Wallis test show for each factor the  degrees of freedom (FD), the experimental value of the statistical F (F value) and its associated p-value. If the output is smaller than 0.05, then the
%effect of this factor is statistically significant at $95\%$
%confidence level (which indicates that different initial values of
%this parameter lead to significant differences on the fitness).
%
%We have obtained values lower than 0.05 for all parameters in all scenarios (generated p-values tables have been omitted due to space constraints). These results show that all the parameters considered have a significant
%impact in the generation of the agents behavior. This confirm our hypothesis that the four elements that conform a story (time, characters, source of conflict and world) have a great repercussion in the generation of stories in the simulation environment.
%
%Since a significant p-value only tells  that the effects are not all
%equal (i.e., reject the null hypothesis), post-hoc tests might be used
%to determine which effects or outputs are significantly different from
%which other. 
%
%Therefore, a Kruskal-Wallis multi-comparison test has also been
%performed, showing significant differences among all parameter values,
%except for number of profiles (only using 1 profile has significant
%difference with respect to use 2, 4 and 8), and GA population size
%(64-128 and 128-256), both values (number of profiles and GA population size) in the scenarios $S_1$ and $S_2$. This
%can be explained because only one profile is necessary in these
%scenarios (as the hero and villain archetypes are based in attacking
%other rats, and therefore, can be shared by the same agent). Therefore, 
%the fitness function $F_1$ and $F_2$ only differs in counting the archetype of an `attacking' rat almost twice. 
%
%
%\begin{figure}
%        \centering
%        \subfigure[\scriptsize{Scenario 1: Villain}]{
%                \includegraphics[ trim=0cm 2cm 0cm 2cm,
%                width=3.7cm]{imags/boxplotz1P.eps}
%                \label{fig:e1_p}
%        }
%        \subfigure[\scriptsize{Scenario 2: Hero}]{
%                \includegraphics[ trim=0cm 2cm 0cm 2cm,
%                width=3.7cm]{imags/boxplotz2P.eps}
%                \label{fig:e2_p}
%        }
%        \subfigure[\scriptsize{Scenario 3: Avenger}]{
%                \includegraphics[ trim=0cm 2cm 0cm 2cm,
%                width=3.7cm]{imags/boxplotz5P.eps}
%                \label{fig:e3_p}
%        }  
%        \caption{Boxplots for parameter P (number of profiles)}\label{fig:boxplotsP}
%\end{figure}
%%
%All the results have also been plotted in order to better understand 
%their differences (in Figures \ref{fig:boxplotsP} to \ref{fig:boxplotsS}). At first glance, the median for D, W and F is 0 (or almost 0) for several
%values. This has several possible explanations: First, the
%number of profiles has quite an impact in the results (Figure
%\ref{fig:boxplotsP}), as it was shown previously in
%\cite{garcia14my}. 
%
%Increasing the number of profiles means changing the search problem
%from finding a single finite state automaton whose behavior
%eventually results in a world compatible with our search to finding
%two or more compatible with it and among themselves. This also happens
%independently of the situation and including complex ones, like the
%Avenger scenario, so for the time being we should conclude that a
%single profile, that is, having the description of a single FSM that
%describes the behavior of the agents in the world, is the best option for any scenario. 
%
%\begin{figure}[h!tb]
%        \centering
%        \subfigure[\scriptsize{Scenario 1: Villain}]{
%                \includegraphics[trim=0cm 2cm 0cm 3cm, width=3.7cm]{imags/boxplotz1D.eps}
%                \label{fig:e1_d}
%        }
%        \subfigure[\scriptsize{Scenario 2: Hero}]{
%                \includegraphics[trim=0cm 2cm 0cm 3cm, width=3.7cm]{imags/boxplotz2D.eps}
%                \label{fig:e2_d}
%        }
%        \subfigure[\scriptsize{Scenario 3: Avenger}]{
%                \includegraphics[trim=0cm 2cm 0cm 3cm, width=3.7cm]{imags/boxplotz5D.eps}
%                \label{fig:e3_d}
%        }  
%        \caption{Boxplots for the number of days (parameter D).}\label{fig:boxplotsD} 
%\end{figure}
%
%\begin{figure}[h!tb]
%        \centering
%        \subfigure[\scriptsize{Scenario 1: Villain}]{
%                \includegraphics[trim=0cm 2cm 0cm 3cm, width=3.7cm]{imags/boxplotz1F.eps}
%                \label{fig:e1_f}
%        }
%        \subfigure[\scriptsize{Scenario 2: Hero}]{
%                \includegraphics[trim=0cm 2cm 0cm 3cm, width=3.7cm]{imags/boxplotz2F.eps}
%                \label{fig:e2_f}
%        }
%        \subfigure[\scriptsize{Scenario 3: Avenger}]{
%                \includegraphics[trim=0cm 2cm 0cm 3cm, width=3.7cm]{imags/boxplotz5F.eps}
%                \label{fig:e3_f}
%        }  
%        \caption{Boxplots for food amount (parameter F)}\label{fig:boxplotsF}
%\end{figure}
%
%A similar result is obtained for the number of days, whose results in
%the three scenarios can be seen in Figure \ref{fig:boxplotsD}: A small
%amount of days (64) is not enough to allow the generation of any
%archetype, as there is no time to develop a story, or, in another
%words, for the events that we examine to compute fitness to occur, in
%most of the scenarios. This can also be said
%%
%\begin{figure}[h!tb]
%        \centering
%        \subfigure[\scriptsize{Scenario 1: Villain}]{
%                \includegraphics[trim=0cm 2cm 0cm 3cm, width=3.7cm]{imags/boxplotz1W.eps}
%                \label{fig:e1_w}
%        }
%        \subfigure[\scriptsize{Scenario 2: Hero}]{
%                \includegraphics[trim=0cm 2cm 0cm 3cm, width=3.7cm]{imags/boxplotz2W.eps}
%                \label{fig:e2_w}
%        }
%        \subfigure[\scriptsize{Scenario 3: Avenger}]{
%                \includegraphics[trim=0cm 2cm 0cm 3cm, width=3.7cm]{imags/boxplotz5W.eps}
%                \label{fig:e3_w}
%        }  
%        \caption{Boxplots for world size (parameter W)}\label{fig:boxplotsW}
%\end{figure}
%%
%about the world dimension (Figure \ref{fig:boxplotsW}): larger worlds
%are more sparsely populated and have less interaction events, so the chances of an encounter that can trig an event (for
%example, a fight) is more difficult. 
%
%From the study of these two parameters we can conclude that, at least
%for these scenarios and possibly for any scenario, the baseline number
%of days should be 256 and the world for this population should have a
%small size of 25 cells. 
%
%\begin{figure}
%        \centering
%        \subfigure[\scriptsize{Scenario 1: Villain}]{
%                \includegraphics[trim=0cm 2cm 0cm 3cm, width=3.7cm]{imags/boxplotz1S.eps}
%                \label{fig:e1_s}
%        }
%        \subfigure[\scriptsize{Scenario 2: Hero}]{
%                \includegraphics[trim=0cm 2cm 0cm 3cm, width=3.7cm]{imags/boxplotz2S.eps}
%                \label{fig:e2_s}
%        }
%        \subfigure[\scriptsize{Scenario 3: Avenger}]{
%                \includegraphics[trim=0cm 2cm 0cm 3cm, width=3.7cm]{imags/boxplotz5S.eps}
%                \label{fig:e3_s}
%        }  
%        \caption{Boxplots for GA population size (parameter S)}\label{fig:boxplotsS}
%\end{figure}
%
%Finally, the amount of food (Figure \ref{fig:boxplotsF}), which is 
%the main source of conflicts, 
%also needs to be low enough so that it actually happens, in this case 1/8
%of the world size. 
%
%
%With respect to the GA population size, Figure \ref{fig:boxplotsS} shows visually the confirmation of the tests: there are significant differences in the values for the Scenario 3. Because the large exploration space of this problem it is clear that larger sizes, in combination with a stop criterion based in changes of the best individual found, can obtain a higher range of possible solution values.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Conclusions}

%ACKNOWLEDGMENTS are optional
\section{Acknowledgments}

%This work has been supported in part by SIPESCA (Programa Operativo FEDER de Andalucía 2007-2013), TIN2011-28627-C04-02 (Spanish Ministry of Economy and Competitivity), SPIP2014-01437 (Dirección General de Tráfico), PRY142/14 (Fundación Pública Andaluza Centro de Estudios Andaluces en la IX Convocatoria de Proyectos de Investigación) and PYR-2014-17 GENIL project (CEI-BIOTIC Granada).

\bibliographystyle{IEEEtran}
\bibliography{garcia_ortega}

\newpage
\listoftodos[Notes]

\end{document}
