\documentclass[runningheads,a4paper]{llncs}

\usepackage[latin1]{inputenc}
\usepackage{amssymb}
\usepackage{amsmath}
\setcounter{tocdepth}{3}
\usepackage{graphicx}
\usepackage{multirow}
\usepackage{rotating}
\usepackage{subfigure}
%\usepackage{subfig}
\usepackage{url}
\usepackage{caption}

\newcommand{\keywords}[1]{\par\addvspace\baselineskip
\noindent\keywordname\enspace\ignorespaces#1}

\providecommand{\tabularnewline}{\\}

\begin{document}

\mainmatter  % start of an individual contribution

% first the title is needed
\title{It's time to stop: A comparison of termination conditions in the evolution of game bots}

% a short form should be given in case it is too long for the running head
\titlerunning{It's time to stop}

% the name(s) of the author(s) follow(s) next
%
% NB: Chinese authors should write their first names(s) in front of
% their surnames. This ensures that the names appear correctly in
% the running heads and the author index.
%
\author{Non A. Me%
\thanks{NoInstitute}}
%
\authorrunning{Me, N}
% (feature abused for this document to repeat the title also on left hand pages)

% the affiliations are given next; don't give your e-mail address
% unless you accept that it will be published
\institute{No Institute}

%
% NB: a more complex sample for affiliations and the mapping to the
% corresponding authors can be found in the file "llncs.dem"
% (search for the string "\mainmatter" where a contribution starts).
% "llncs.dem" accompanies the document class "llncs.cls".
%

\maketitle

%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%   ABSTRACT   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
\begin{abstract}
Evolutionary Algorithms (EAs) are frequently used as a mechanism for the
optimization of autonomous agents in games (bots), but knowing when to
stop the evolution, when the bots are good enough, is not as easy as it would a priori seem. 
The first issue is that optimal bots are either unknown (and thus unusable as termination condition) or unreachable. In most EAs trying to find optimal boots fitness is evaluated through game playing. Many times it is found to be 
noisy, making its use as a termination condition also complicated. 
% Reescrito todo que el abstract ocupa casi una pï¿½gina
A fixed amount of evaluations or, in the case of games, a certain
level of victories does not guarantee an optimal result.
%% The termination strategies left are independent of the algorithm:
%% running for a constant amount of generations is often considered as an
%% acceptable criteria, if the obtained bots are good enough. However
%% this is not necessarily the best approach, since further optimization
%% could lie ahead, so other options must be explored.  
%% Other possibilities, such as certain level of victories (or fitness
%% quality) over external enemies as a termination condition, present the
%% problem that the bots will be overfitted to those particular enemies. 
% Antonio - De hecho, usar mï¿½ltiples enemigos externos es la mejor forma de evaluaciï¿½n (si no es un co-evolutivo), ya que asï¿½ se lucha contra la sobre-especializaciï¿½n. Usar una condiciï¿½n de parada basada en eso serï¿½a el mejor enfoque, que pero se necesitan muuuchos enemigos.
% Antonio - he aï¿½adido el tï¿½pico criterio de parada basado en generaciones
%% Even as any of these conditions is not perfect, there is the
%% possibility of combining several of them as termination criterion so
%% that bots that are as optimal as possible, (and in as general a
%% context as it is possible) are found; also, in a minimal amount of
%% time and evaluations. 
That is why the objective of this paper is test several termination conditions 
in order to find the one that yields optimal solutions whithin a restricted 
amount of time, and that allows researchers to compare different EAs as fairly 
as possible. To achieve this we will examine several ways of finishing an EA 
who is finding an optimal bot design process for a particular game, Planet Wars 
in this case, with the characteristics described above, determining the 
capabilities of every one of them and, eventually, selecting one for future 
designs.
%% We will use a particular game, Planet Wars, which has been studied
%% extensively in the literature, but the conclusions to our study could,
%% in principle, be extended to any Real Time Strategy (RTS) game or even to any game with non-deterministic match results and with an unknown best solution.
% Antonio - Tambiï¿½n se hablï¿½ de extrapolar los resultados a otros problemas con caracterï¿½sticas comunes a estos, es decir: Fitness ruidoso, sin ï¿½ptimo conocido, etc, no?
% Antares - Serï¿½a lo suyo . Por ejemplo, hablando con Gustavo y Maribel, 
% hemos dicho que realmente estas condiciones de parada son aplicables a cualquier juego.
% Antonio - faltarï¿½a la ï¿½ltima frase con las conclusiones que se alcancen, no?
% Antares - Digo yo :P
\keywords{Videogames, RTS, evolutionary algorithms, termination criteria, noisy fitness}
\end{abstract}

%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%   INTRODUCTION   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
\section{Introduction}


Evolutionary Algorithms (EAS) are one of the methods usually applied to find the
 best autonomous agent for playing a game, i.e. the best \textit{bot} \cite{Agent_Smith_CEC2009,bots:evostar,unreal:gecco10:anon,DBLP:conf/cig/Fernandez-AresGMG12:anon} through a process mimicking the natural evolution of the 
species. As in any other algorithm, the termination condition is a key factor 
as the rest ot the experimental setup since it affects the algorithmic 
performance, with respect to the quality of the yielded solution, and also to 
the amount of resources devoted to the run. The usual stop criterion in EAs 
\cite{EAs_Back96} is reaching a constant number of generations (or 
evaluations), 
%Maribel: el nÃºmero de generaciones y el nÃºmero de evaluaciÃ³nes
%estÃ¡n relacionadas sÃ³lo en poblaciones de tamaÃ±o fijo. Yo las
%tratarÃ­a como condiciones de parada en algunos Ã¡mbitos, aunque no
%sÃ© si nos interesa o no tratarlos separados o simplemente decir que
%en este caso son lo mismo aunque para otros entornos no tiene por
%quÃ© serlo.
% Maribel da exactamente igual. Lo importante es el nï¿½mero de
% evaluaciones. - JJ
 which is normally related to a fixed {\em computing power budget} for doing 
the run. Another usual approach is based in a number of generations in which 
the best solution is not improved or the distance to the optimum is not reduced 
\cite{RocheTermination13}. However, neither of them might be useful in certain 
kind of problems such as games, mainly due to the noisy nature of the fitness 
function \cite{merelo14:noisy,bots:evostar}.

This \textit{noise} is inherent to most fighting games, since the enemy behavior, the game environment, the bot itself, or all of them, may have an
stochastic component which might make the result of a match vary from
one run to the next. Thus, different values would be returned
every time the fitness is measured by playing the game.

%% This issue arises in games due to the noisy and combat-based methods
%% used for the evolution of bots, because there is not a single,
%% principles-based way to compute the fitness, and thus, end the
%% algorithm.
Independently of the chossen approach, it is usually impossible to reach a 
global optimum short of managing to obtain a bot that, as in Sun Tzu's ``Art of 
war'' \cite{tzu2013art}, is able to beat the opponent without fighting, as the 
opponents are usually not known before the EA is run.
% Antonio - esta frase no se entiende
% a menos que puedas ganar sin luchar, no puedes obtener el fitness
% ï¿½ptimo - JJ
% Antonio - Yo esa cita la quitarï¿½a, aunque le dï¿½ un componente
% literario/gafapastiense al artï¿½culo. Tampoco veo por quï¿½ no se puede
% obtener un ï¿½ptimo por no conocer al oponente antes de la
% evaluaciï¿½n. Si es un manta, le puedes ganar siempre...
% Afï¿½. Es literario-gafapastiense-bromista. ï¿½Quï¿½ tiene de malo? - JJ
% Antares - A mi gusta xD
% Antonio - a mi no me molesta la frase, pero la referencia no hace falta, creo yo. ;D
% ï¿½quï¿½ hay de la segunda parte de mi comentario
% Antares - Le puedes ganar siempre, pero la cosa es que tardas un tiempo (turnos) en ganarle :)
To solve this, usually tournaments with previously-known opponents are used in 
the computation of the fitness function and an ``optimum'' is reached when a 
certain number of victories are achieved against them. However, using only one 
or a small number of opponents may lead to overfitted solutions that only beat 
the enemies that have been used during the `training' phase (to compute the 
fitness) \cite{DBLP:journals/jcst/MoraFGGF12}, and using more opponents might 
make evolution unwieldy consuming too many CPU cycles.

These two issues, noise and optimal fitness reachability, are normally not 
taken into account when choosing how to stop the evolution process. Usual 
approach is to use a fixed number of evaluations or a fixed amount of time, 
usually given by the game or challenge constraints. When this constrain is not 
imposed by a challenge or some other condition, this is not the right approach 
for finding the best game agent, or even one that is good enough to defeat 
those found in the state of the art.

That is why finding the optimal termination condition is essential in the 
search for game bots that competes in a particular challenge. If there is not a 
fixed evaluation budget, the next usual solution is consume as much as possible, 
% Antonio - 'as you have got'??? En quï¿½? A quï¿½ te refieres?
% ``darlo todo'' - JJ
which is fair if you are designing a bot %maribel, el got no se suele
                                %poner 
% Es coloquial y correcto gramaticalmente - JJ
to participate in a competition
\cite{DBLP:conf/cec/Fernandez-AresMGGF11:anon}. However, from a
methodological point of view, if you want to compare different
approaches to design a bot it needs to be done in conditions that are
as fair as possible, which might make {\em as much as you have got} a bit short 
on details: a independent stopping criterion is needed, since using any method 
for the same time or for the same number of evaluations can be misleading. 
% Antonio - Explicar por quï¿½ no es justo.
The object of the process is to obtain an optimal bot and some methods might 
need more evaluations, or more time, than others.
% explicado - JJ
From a methodological point of view, it can be considered naive using a number of evaluations as the termination condition.

These three problems, noise, unknown optimum and fair comparison, are common to 
many games as well as for many other problems without a known (or reachable) 
set of optimal solutions. In this paper, we try to solve these issues by the
introduction of novel stopping criterions for the EAs. They are compared 
against classical ones, and among themselves when trying to generate 
competitive bots for video games using Genetic Programming (GP) 
\cite{GP_Koza92}, because this method has proved to be quite flexible and has 
obtained good results in previous works \cite{EvoStar2014:GPBot:anon}.% Este no
                                % estï¿½ en la bibliografï¿½a. Por favor,
                                % aï¿½adidlo a geneura.bib - JJ  
                                % Antonio - hecho

\textit{Planet Wars}\footnote{http://planetwars.aichallenge.org/} game 
% Antonio - poner una URL mejor que esta (la del campeonato), si se estima oportuno.
 has been chosen in our experiment, as it is a simple Real Time Simulator (RTS) combat-based game (only one type of resource, one type of attack and one type of unit), and also it has been widely used in the literature, using different generation methods and fitness functions \cite{DBLP:journals/jcst/MoraFGGF12,DBLP:conf/cec/Fernandez-AresMGGF11,DBLP:journals/nc/Lara-CabreraCL14,NogueiraCoevolutionary14}. This
game fulfills the two conditions mentioned above; initial position of bots is 
random and the decisions are stochastic, although the result of the combat is deterministic. 

Summarizing, our objective in this study is to find a stopping criteria that 
converges to optimal solutions 
%Maribel: Anadir al final de la frase, saving resources and time. 
% Antonio - he puesto 'optimal', pero no sï¿½ se dejarlo como 'best'
and that is independent of the method chosen. To measure the quality of every 
approach, we will consider time, or number of generations, needed to obtain the 
solution and the quality of that solution.
% a ver, esto lo tenemos que pensar. 
% Vamos a poner un mï¿½todo como base: nï¿½mero fijo de evaluaciones, por
% ejemplo. A partir de ahï¿½ yo considerarï¿½a el nï¿½mero de evaluaciones
% adicionales y la mejora adicional al fitness. Tambiï¿½n el fitness
% absoluto, claro. - JJ
% Antonio - yo digo que el fitness (el usado durante la evoluciï¿½n)sea
% un mero indicador de lo buena que es cada soluciï¿½n, pero que eso se
% contraste con una evaluaciï¿½n final de los mejores individuos
% encontrados con cada criterio de parada. Es decir, cuando se tengan
% los mejores se ponen a luchar en muchos mapas contra muchos rivales,
% para decidir cuï¿½l de ellos es realmente bueno y cuï¿½l es,
% eventualmente o teï¿½ricamente, el mejor.
%Habrï¿½ que tener en cuenta tambiï¿½n el tiempo, digo yo. - JJ
% Antares - Son tres mï¿½tricas a ser consideradas: Bondad (fitness), Tiempo (Generaciones), tasa de finalizaciï¿½n (no todos los SC han terminado en todas las ejecuciones). Sobre la bondad, se estï¿½ ejecutando una baterï¿½a de test en mï¿½ltiples enfrentamientos :)

In general, it is possible that the conclusions could be extended to any 
problem solved via EAs with an unknown or unreachable optimum and noisy 
fitness, since the termination conditions chosen are independent of the game 
itself and just take into account evolutionary measures. In fact, they could be 
extended to any problem with the same characteristics.
% Antonio - ademï¿½s de esto, que hay que hacerlo para dejar la frase, hay que demostrar de forma 'impepinable' (mï¿½s o menos) que lo que se propone funciona.

The rest of the paper is organized as follows. Next section establishes the 
state of the art in the use of termination conditions for this kind of EAs in 
which the optimum is not known and/or with the presence of a noisy environment 
or fitness evaluation. Then Section \ref{sec:met} %we will 
%Maribel: quitar el will de la frase
% Si lo quitas que siga concordando sujeto y predicado - JJ
presents the different termination conditions %maribel Borrar desde aquÃ­ hasta "and how ... " osea que la frase quedarÃ­a mucho mÃ¡s corta y sencilla "Next in Section \ref{sec:met} we present the different termination conditions and how they contribute to ...
sketches the problem we are using in this particular paper, evolution of bots 
for Planet Wars. Results will be presented in Section \ref{sec:res}, followed 
by the conclusions and a discussion of the implication of the obtained results.
% Antonio - esto habrï¿½a que reescribirlo mejor y con los contenidos
% reales. ;D
% Se ha hecho?


%maribel: En realidad, este Ãºltimo pÃ¡rrafo lo simplifiquÃ© y reescribÃ­ entero tal y como os pongo aquÃ­ abajo
%The rest of the paper is organized as follows. Next, section \ref{sec:SoA} establishes the state of the art related to termination conditions for evolutionary algorithms in which the optimum is not known and/or is noisy. Following, section \ref{sec:met} presents the set of termination conditions which have been checked in this paper and how they contribute to prove which one has better behaviour in this context; we also sketch the problem we have used in this particular paper, evolution of bot for Planet Wars. Results are presented in Section \ref{sec:met}, followed by the conclusions and a discussion of the implication of the obtained results.
% se puede usar este si falta espacio - JJ
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  STATE OF THE ART  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
\section{State of the Art}
\label{sec:SoA}

Real world optimization problems often involve uncertain environment including noisy and/or dynamic environments \cite{Jin2005303,QianYZ13}.
Basic strategies to handle noisy fitness functions include using a larger population size, averaging to filter out the noise (re-sampling) \cite{Branke98,Branke2001}, thresholding (employing a threshold value to be used in a selection operator for noisy fitness functions) \cite{Markon2001} or changing the selection criteria.
Other authors propose complex methods such as including the multipopulation approach, special operators or case-based memory \cite{BhattacharyaIM14}. 

%--- Took out reference to our own paper, which should be taken out to the intro. I don't think anything above this is really relevant, other than referencing a very general paper that deals with noise (or our own paper at IJCCCI) - JJ


In \cite{merelo14:noisy}, Merelo et al. propose dealing with the problem of noisy fitness functions using two methods, the former based on re-evaluation of surviving individuals and the latter that uses a Wilcoxon test to compare a sample of individuals and partial-order them within the population.

% TERMINATION CRITERIA

As many EA depend on population diversity for its evolution, a termination condition given in terms of the rate of population diversity decrease would be useful. 
In this sense, Roche et al. \cite{RocheTermination13} propose terminating the evolution process by analyzing the EA population diversity. Thus, they presents a numeric approximation to steady states that is used to detect the moment that the population has lost its diversity for algorithm termination.


Usually, the algorithm termination is decided based on a heuristic stopping criteria, such as the maximum number of evaluations or on reaching a performance level during the run. 
When the algorithm converges, it is terminated in order to avoid wasting computational resources.
Although these criteria are suitable for well defined benchmark problems (the optimum is known), they are not applicable to real world problems. 
In these cases, more sophisticated heuristic stopping criteria have to be used \cite{NME2909,Wagner2009,Wagner2010}.

In the last years some adaptive alternatives have been proposed  as termination conditions.
In this sense, Safe et al. \cite{Safe2004} present a review of the state-of-the-art in the design of termination conditions and convergence analysis in GAs.
The main problem is determining an accurate value for the number of generations, so that the GA convergence is guaranteed.
Authors propose searching the minimum number of generations by means of a convergence analysis \cite{Rudolph1994}.


Finally, as stated in Hart et al. \cite{Hart1996} when calculating metrics of parallel performance, it is incorrect to stop a parallel EA either after a fixed number of iterations or when the average fitness exhibits little variation. In this case, stopping rules based on the attainment of thresholds should be used, i.e. stopping the run when a solution that reaches this threshold is found \cite{Sena2001}. Nevertheless, threshold definition requires a good estimation of the optimum of the problem under study, which is unavailable in many cases \cite{Safe2004}.

% A conclusion should be added to this based on the last paragraph - JJ
In this paper, several stopping criteria will be studied, considering the time needed to obtain the solution and the quality of that solution. 


%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  METHODOLOGY  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
\section{Methodology and experimental setup}
\label{sec:met}

%This section describes, comments and justifies the different
%termination approaches to be tested in the paper. 
In this paper we propose different termination criteria that are based on different EA features, such as the parameters of the algorithm (maximum number of generations) or the population (improvement, replacement or age). 
% Antonio - no hay nada de diversidad
% Antares - Â¿A quÃ© te refieres con diversidad?
The differences in performance obtained with each configuration will be analysed and compared. 
Although in this work we focus on a specific scenario (generation of competitive bots for the Planet Wars game), the results obtained could, in principle, be applied to other similar problems. Therefore, we justify a general experimental and parameter setup, with the specific restrictions applied to the problem we are addressing. 

% --------------------------------------------------------------

\subsection{Algorithm features}

 
% Cada vez que Antonio usa considered, Dios mata a un gatito - JJ
%In this paper, we use a generational approach [REF] in order to have a high level of diversity, % justificarlo
%which is better for checking some of the stop criteria to test. % ï¿½por quï¿½? - JJ
%Specifically those population-based ones, which are normally more sensitive to diverse populations.
%maribel: Por quï¿½ es mejor tener diversidad para probar criterios de parada?, esto serï¿½ mejor para algunos criterios, pero no para todos, de hecho los criterios de parada mï¿½s utilizados, como el nï¿½mero de evaluaciones o el nï¿½mero de generaciones, no tienen nada que ver con la diversidad de la poblaciï¿½n. Sï¿½ es verdad que es importante para criterios basados en alguna metrica basada en la poblaciï¿½n, como el fitness medio en relaciï¿½n al mejor fitness, o criterios basados en algï¿½n tipo de distancia entre los individuos de la poblaciï¿½n, pero no para todos los criterios de parada en general, como parece que dice la frase anterior, asï¿½ que creo que hay que justificar mejor el que el algoritmo sea generacional. Pongo a continuaciï¿½n una posible justificaciï¿½n a ver quï¿½ os parece.
% Antonio - Pos eso es lo que habia puesto yo. XD 
% Me has movido al frase en la que aclaraba eso mismo. Ademï¿½s de que desde el principio ponï¿½a 'some of the stop criteria'. ;D
% Esta frase no tiene sentido. - JJ

%The aim of this paper is to test which is the best way for stopping an evolutionary algorithm to find an autonomous and winner agent for playing a game. We have selected several stopping criteria, some of them, are controlled only by one or more evolutionary paremeter, but others by some features of the population. Due to this kind of stopping criteria, the diversity of the population should be preserved. For this reason, the generational approach is a good option for our test setup. 

%FERGU: He comentado la intro de arriba y he vuelto a escribirla abajo justificando por quï¿½ usamos el GP generacional

%The first step of the methodology requires to select the most adequate EA to the problem we are addressing. 
% Antonio - ï¿½Quï¿½ pesaos con lo de la metodologï¿½a! Joï¿½, que aquï¿½ la metodologï¿½a va de elegir bien los criterios de parada, no de diseï¿½ar el algoritmo. Eso ya lo tendrï¿½ hecho el que vaya a usar nuestro mï¿½todo para elegir cï¿½mo/cuï¿½ndo parar. :/
The aim of the implemented algorithm is to generate competitive bots from scratch (without human knowledge), so a Genetic Programming algorithm has been used. These kind of algorithms have been previously used in the generation of bots in videogames \cite{Esparcia2013GPunreal,Harper2014403}. 
% Antonio - yo quitarï¿½ esta frase, o pondrï¿½a mï¿½s citas, una de dos. ;) FERGU: aï¿½adida referencia

A \textit{generational} approach has been considered in the algorithm. 
% Antonio - ï¿½alguien sabe una cita de GP Generacional?
In it, at least half of the population (the best chosen as parents)
remains in the population from one generation to the next. This provides the algorithm with a higher exploration factor than a steady-state approach, which is very positive due to the huge search space of the problem we are solving.

%the lack of a known optimum solution, and the noisy feature of the problem, a generational GP algorithm will be used, with a specific scoring method as fitness.
% Antonio - Esto no tiene nada que ver con que se haya elegido un enfoque generacional. Vamos que no veo en quï¿½ ayuda eso... :(
% De hecho, para el ruido irï¿½a mejor un estacionario, creo yo.

A \textit{Score Function} has been proposed in order to measure the quality of a generated bot (a solution or individual in the algorithm). This scoring method tries to reduce the effects of the noisy evaluation (following the guidelines of other works \cite{DBLP:journals/jcst/MoraFGGF12}) by computing fitness from the result of 30 different matches against an expert rival.
Thus, the function considers the number of victories, turns to win and turns resisted before being defeated by the opponent (in the case of lose). The rival is \textit{ExpGenebot}, introduced in
\cite{DBLP:conf/cig/Fernandez-AresGMG12}, and based on the improvement of the heuristics proposed by a human player. This bot is, for this particular game, the state of the art. ExpGenebot adapts its behaviour doing an initial analysis
of the battle map and depending on the balance of forces between it and the enemy, i.e. location of the fleets and amount of ships.
This rival has been chosen due to its potential variety of behaviours,
so 30 different representative maps have been chosen for each
evaluation (30 matches, 1 match per map), to ensure the bot behaves in a different way in every match. Thus, the fitness evaluation enhances the value of an individual. 

Then, the fitness of each individual $i$ of the population is obtained using the next formula:
\begin{equation}
Score_{i}=\alpha+\beta+\gamma\label{eq:score}
\end{equation}

\begin{equation}
\alpha=v,\alpha\in\left[0,NB\right]
\end{equation}

\begin{equation}
\beta=NB\times\frac{t_{win}+\frac{1}{N\times t_{MAX}+1}}{\frac{t_{win}}{v+1}+1},\beta\in\left[0,NB\right],t_{win}\in\left[0,NB\times t_{MAX}\right]
\end{equation}


\begin{equation}
\gamma=\frac{t_{defeated}}{NB\times t_{MAX}+1},\gamma\in\left[0,1\right],t_{defeated}\in\left[0,NB\times t_{MAX}\right]
\end{equation}

The terms used are: the number of battles ($NB$) to test, the number of
victories of the individual against ExpGenebot ($v$), the total number of
turns used to beat ExpGenebot ($t_{win}$), the total number of turns when
the individual has been defeated by ExpGenebot ($t_{defeated}$) and the
maximum number of turns a battle lasts ($t_{MAX}$). This score aims to
favour the victories against the turns to win and turns to be
defeated, giving different ratios to each section. 
Therefore $\alpha$ has the highest ratio, the term $\beta$ adds an extra score taking into account the number of turns when the individual wins (lower numbers to win implies better bots), following a exponential curve; and finally, $\gamma$ adds a corresponding score from the turns to be beaten 
(higher number is better, as it is difficult to be beaten). The 
`1' in all denominators is used to avoid dividing by 0.

As previously said, each individual has been tested 30 times in different maps, therefore $NB=30$, and a the limit of turns is the default of the competition ($t_{MAX}=1000$).

%TODO FERGU: comentar y justificar el resto de parï¿½metros del GP FERGU: hecho abajo
The used GP evolves a binary tree formed by {\em decisions} (logical expressions that evaluate the current state of the game) and {\em actions} (the leafs of the tree: the amount of ships to send to a specific planet). This tree is evaluated in each player's planet, analysing the current state of the map/planet (decision), and how many ships send from that planet to an specific target planet (action). These target planets can be the wealthiest, the closer one, etc. owned by the player or the enemy, or neutral. The possible actions and decisions are listed in \cite{EvoStar2014:GPBot:anon}. Table \ref{tab:parameters} summarizes the rest of the operators and parameters used in the algorithm. These parameters were also justified in that paper, obtaining competitive bots.

\begin{table}
\begin{center}
\begin{tabular}{|c|c|}
\hline
{\em Parameter Name} & {\em Value} \\ \hline
Population size ($N$) & 32 \\ \hline
Number of battles for scoring ($NB$) & 30 \\ \hline 
Re-evaluation of individuals & Yes \\ \hline
Crossover type & Sub-tree crossover \\ \hline
Crossover rate & 0.5\\ \hline
Mutation  & 1-node mutation\\ \hline
Mutation step-size & 0.25 \\ \hline
Selection & 2-tournament \\ \hline
Replacement & Generational\\ \hline
Maximum Tree Depth &  7 \\ \hline
%Runs per configuration & 30 \\ \hline
\end{tabular}
\caption{GP parameters and operators used in the experiments.}
\label{tab:parameters}
\end{center}
\end{table}

% --------------------------------------------------------------

\subsection{Termination Criteria}
% Antonio - Maribel, criteria es el plural de criterion. ;)

The traditional set of stopping criteria are either based on stagnation, checking for the existence of a solution in the set and a fixed budget. Combining them we have designed a set of five different algorithm stop criteria which are going to be checked in the paper, namely:

\begin{itemize}
    \item \texttt{[NG] Number of Generations}: it is the classical termination
      criteria in evolutionary algorithms. We will consider 30, 50, 100 and 200 generations since some papers \cite{EvoStar2014:GPBot:anon} have mentioned the middle value. As indicated in the previous section,
      Hart \cite{Hart1996} claims that this is not the right way to
      compare different approaches; however, we include it here as a
      baseline for comparison with the other approaches. % En ese caso yo creo que no habrï¿½a que probar tantos valores diferentes.

    \item \texttt{[AO] Age of Outliers}: if the age of one individual is an outlier in the comparison with the rest of the population then it would be potentially an optimal solution and the algorithm can be stopped. % why?
The idea behind this criterion is that an individual surviving for several generations more than the rest of the population lead to be a very good player (much better than the rest), and thus, a potential optimal solution for the problem. The difference between the age of the outlier and the rest of the population is measured considering three factors: 1, 1.5, 2 and 2.5 times the interquartile range (IQR). %explain a bit. Does this mean that it will stop when it finds somebody that is two times as old as the average? - JJ
% Antonio - @Antares, explica esto, que no me quedï¿½ claro lo de la IQR... :D
% Vale, lo pongo primero en espaï¿½ol y luego intento hacerlo en inglï¿½s. En este criterio de parada hemos empleado el concepto estadï¿½stico de frontera siperior para definir un umbral. Por definiciï¿½n, todo valor de la muestra que supere esa frontera estï¿½ considerado un punto outsider. Para calcular dicha frontera se necesitan los cuartiles de la muestra Q1 y Q3, con los que se calcula el rango intercuartï¿½lico (IQR). El valor de la frontera superior se calcula como = Q3 + 1.5 + IQR . Sin embargo, el valor 1.5 puede ser ajustado a voluntad se denomina rango de la frontera. En nuestro caso, hemos empleado el valor estï¿½ndar de 1.5 asï¿½ como valores menos restrictivos (1.0) y mï¿½s restrictivos (2.0 y 2.5).

    \item \texttt{[RT] Replacement Rate}: when using an elitist strategy in which individuals are replaced only if the offspring is better, the fact that the population stops generating better individuals might be a sign of stagnation. Four different rates have been tested, namely $\frac{n}{2}$ (50\%) , $\frac{n}{4}$(25\%), $\frac{n}{8}$(12.5\%), $\frac{n}{16}$(6.25\%) ... % but this has to be combined with a steady state approach or something. By itself, it does not mean a thing. Please explain - JJ
% Antonio - en la descripciï¿½n del algoritmo se habrï¿½ dicho que va a ser generacional (hecho), ya que en un estacionario la tasa de reemplazo estarï¿½a mucho mï¿½s acotada. ;)
% Maribel: En un algoritmo generacional clï¿½sico, se reemplaza toda la poblaciï¿½n con los hijos menos el mejor. Pero nosotros no estamos usando este reemplazo, asï¿½ como asï¿½, sino que hacemos uniï¿½n de los hijos y los padres y nos quedamos con los mejores N no? Si esto es asï¿½, serï¿½a una cosa a comentar en la secciï¿½n de GA features.
% Antonio - efectivamente, he intentado contarlo mejor debajo. En todo caso hay que aclararlo en la descripciï¿½n del algoritmo. - TODO -
% Aquï¿½ habï¿½a que haber hecho una aclaraciï¿½n o referencia al mismo. Ya lo he aclarado - JJ
   The values are based in the maximum number of replacements per generation. Our model defines a maximum of $n = N/2$ individuals to be potentially substituted by the offspring. Thus, the parameter values aim to test half of this probability, and half of the previous values, respectively.
% Antares - @Antonio eso era antes, la idea es que N es siempre el tamaï¿½o de la poblaciï¿½n, y en este caso, n el valor mï¿½xmo de reemplazamiento.
% Antonio - @Antares, cuidao con la variable 'N', que es el nï¿½mero de batallas en la funciï¿½n Score... ahora estï¿½ bien.


    \item \texttt{[FT] Fitness Threshold}: a maximum value to obtain in the evolution could be set considering the top limit of the score function, 45. However, that value is a limit and never reachable unless the bot wins all the matches in just one turn (when the rival code makes a critical error and cannot be run). This, along with the toughness of ExpGenebot, makes the real fitness limit close to 40 instead. Thus, five thresholds have been defined taking this maximum value ($MAX_{SC}$) as a reference, namely: 20 (as half the maximum: $MAX_{SC}/2$), 30 (as half the maximum score plus half this value: $MAX_{SC}/2 + MAX_{SC}/4$), and the division in four parts of the interval these values compose: 22, 24, 26 and 28.

The justification of these values to check is related with the noisy nature of the fitness/score function, which leads us to think that the improvements of fitness will be very limited (very short steps will be attained in the evolution in the range of the high scores).
% Los valores son bastante arbitrarios, pero bueno. 
% Antares - ï¿½Esto no lo habï¿½as cambiado tï¿½? ya no son estos :(
% Antonio - el que comenta es @JJ, no yo. :P
%           Ya lo he cambiado, intentando justificar esto, pero weno, es un poco chungo...
% Antares - Ya el problema ha sido que los valores ``chulos'' no arrojasen resultados. De todos modos, es lo que te comentï¿½ una distribuciï¿½n uniforme desde la ``mitad'' del fitness hasta el valor mï¿½ximo.
In general, setting a fixed value that is a certain distance away to a known (and maybe unreachable) optimum is a compromise solution, since it is not known in advance whether this lower level will be even reached and, if it is, what would be the effort needed to go beyond that and whether a better solution (even including noise) could be found with a higher value. 
% En este caso, ï¿½no se tiene en cuenta el ruido? - JJ
% Antares - Sï¿½ se contempla el ruido, ya que se siguen haciendo re-evaluaciones. 

    \item \texttt{[FI] Fitness Improvement}: in an ideal evolutionary process the fitness of the best individual must be improved every generation. However, the noisy nature of the problem (or the noisy fitness function) makes this difficult to be measured. Thus, the idea of this criterion is that if the best fitness is not improved during a number of generations, the algorithm must stop. As a difference with the traditional approach, the fitness to test every generation is the best overall, without regarding to which individual it corresponds. This is done because there is a re-evaluation process of all the individuals every generation so, due to the noise, the fitness of the best to date may vary in the following generation.
Four possible values will be tested: 3, 7, 10 and 15 generations. %maribel y por quï¿½ estos? estï¿½ fijado antes en algï¿½n otro paper como el del nï¿½mero de gneraciones?
These values have been set after a dedicated systematic experimentation phase, thus they are the minimum and maximum thresholds plus two intermediate values. These values would be strictly related with the problem difficulty so in order to set them in other cases an experimental process should be done to test the fitness variability or improvement rate per generation.
% Antonio - aclarado. Es la mï¿½s difï¿½cil de justificar. 
% JJ - yo probarï¿½a mï¿½s valores. En todo caso, el fitness variarï¿½ cada generaciï¿½n si se vuelve a ejecutar, ï¿½no? 
% Antonio - Claro, el fitness cambia, pero se considera el fitness mejor global en cada generaciï¿½n, no el del individuo que se considerame el mejor. Lo he aclarado en el texto.
% Antares - si pero el ``fitness'' mï¿½ximo de la poblaciï¿½n alcanzado hasta el momento no cambia, que es con el que se realiza la comparaciï¿½n.
\end{itemize}

The first stop criterion is based in an algorithmic parameter, so the algorithm stops when this parameter reaches a value. For this criterion, the population status does not matter. The rest of criteria are population-based ones, i.e. they consider some of its features to test if the algorithm must stop. The feature of the population leads the stop criteria and so leads the end of the algorithm. 

All these criteria will be tested in the following section. The objective of the experiments conducted is to choose the best stop criterion among all the proposed, and even more, the best value to set on that criterion, depending on the problem to solve and on its features: noise, difficulty, computational limitations, or performance restrictions.

% is to test the set of termination criteria... %el objetivo no es nunca ``probar'' esto. Es solucionar un problema. 

% Habrï¿½ que decir quï¿½ se va a medir y por quï¿½. ï¿½Quï¿½ se compara? ï¿½Por quï¿½?
%
%%%%%%%%%%%%%%%%%%%%%%%%%%  EXPERIMENTS AND RESULTS  %%%%%%%%%%%%%%%%%%%%%%%%%%
%
\section{Experiments and Results}
\label{sec:res}

The experiments conducted have involved 36 runs (this number has been used in order to leverage the computational power of a cluster with this number of nodes), each of them configured including all the defined stop criteria, and also adding an extra termination one, i.e. getting to 500 generations, in order to avoid non-ending runs.

%Antares - Antonio: Ya estamos con el 30... Son 36... 
% Antonio - ya s?que son 36 => ?y por qu?no 40? te dir?. Pero bueno, ale, ya lo he puesto y justificado. ;)

Thus, in every execution all the criteria are checked in every generation and, whenever one termination condition is met, the best individual to that moment (according to its score) is stored as the optimal solution for that criterion, because if that were the unique stop criterion, the algorithm would end.
Once all the runs have finished or the extra termination has been met, we compute the average number of generations and the average score obtained for the same criterion in all different runs. There could happen that one criterion is never met in a run, then this will not be considered in the computation of that value but it decreases the completion rate of the criterion. 

The first study concerns the fitness/score evolution in the runs. Figure \ref{fig:boxplotscore} (left) shows the scores obtained by the best individuals yielded for every stop criterion, and (right) what stop criterion is statistically different from others. This has been done using a Kruskal-Wallis test, given that the Shapiro test concluded that the samples do not follow a Normal distribution.

\begin{figure}
\begin{center}
\subfigure[Score]{\includegraphics[width=0.74\columnwidth]{imags/Boxplot_SC-Score-log.eps}}
\subfigure[Kruskal-Wallis]{\includegraphics[width=0.25\columnwidth]{imags/Kruskal-Score.eps}}
\end{center} 
\caption{(a) Scores of the best individuals (of all runs), grouped by criterion. (b) Kruskal-Wallis test of samples of each criterion by score (black means no statistically significant difference has been found)}
\label{fig:boxplotscore}
\end{figure}

% Antonio - @Antares - yo no mezclar? gr?icos, podemos llegar a las 14 p?inas sin problemas, pero bueno. En caso de dejarlo as?intenta ponerlas como subfigura mejor, porque son cosas muy distintas. ;D
% Antonio - Ser? 'statistical significant difference', ?no?
% statistical_ly_ - JJ

% Antonio - @Antares - SCORE en minúscula, plis ya. :D

The first detail to notice in the figure is the absence of some of the commented stop values for the \textit{Fitness Threshold} criterion, namely 28 and 30, because they have not been reached in any of the runs.
This is a problem derived from using a tough rival such as ExpGenebot. Thus, the maximum fitness/score obtained during the evolution is very limited, since it is very difficult that one bot could win against 30 specialised bots \cite{Wolpert97nofree} (requirement for obtaining at least a score of 30). This is more evident if we take into account that the bots being evolved do not include any adaptive component that analyses the map, as ExpGenebot does. 

As it can also be seen in Figure \ref{fig:boxplotscore}.a all the criterion are well defined, since all the scores grow in every criterion block, so as more restrictive the criterion is (they are met with a lower probability), the higher the obtained score is. The score function is working well, even with the presence of noise, as the wide of the boxplots (score dispersion) demonstrates when the criteria become more restrictive. This is true in all the cases except in the \textit{Age of Outliers} which is so far the criterion with the worse results, as it is also proved by the statistical test (Figure \ref{fig:boxplotscore}.b) which does not find significant differences between the scores obtained by every age-based criterion and the previous and next ones.
The \textit{Replacement Rate} criterion yields the best distribution of results, with a clear fitness improvement tendency and a very good maximum score, close to that obtained by the \textit{Fitness Thresholds}. However the latter is not as good as it seems, since the success rate (times that the runs has reached that value) is the lowest among all for high threshold values. This will be shown in further results.

With respect to the number of generations reached by every criterion, Figure \ref{fig:boxplotgenerations}.a shows their distribution in criterion blocks. It is complemented with the results of the Kruskal-Wallis test (Figure \ref{fig:boxplotgenerations}.b), like in the score graphs.

\begin{figure}[h!tb]
\begin{center}
\subfigure[Generations]{\includegraphics[width=0.74\columnwidth]{imags/Boxplot_SC-Generations-log.eps}}
\subfigure[Kruskal-Wallis]{\includegraphics[width=0.25\columnwidth]{imags/Kruskal-Generations.eps}}
\end{center} 
\caption{(a) Generation attained (of all runs), grouped by criterion. (b) Kruskal-Wallis test of samples of each stop criterion by generations (black means no statistical significant difference has been found).}
\label{fig:boxplotgenerations}
\end{figure}

% Antonio - @Antares - pos eso, lo mismo que antes.
% Antonio - Y lo mismo: ser? 'statistical significant difference', ?no?

% Antonio - @Antares - como ya te dije, yo no soy partidario de usar escalas logarítmicas en los boxplots, ya que se 'falsea' la información que estos ofrecen (el ancho del boxplot es importante). Mira por ejemplo el RT_n/4 o RT_n/8, parecen mucho más dispersos que RT_n/16, pero ¿realmente lo son?

The figure proved again that the criteria are well defined, since everyone needs more generations to be reached when it is more restrictive (higher value or less probability to be met). \textit{Age of Outliers} stop criterion is the faster, reaching less generations, but, as previously stated, it is the worst regarding to the score.  \textit{Fitness Threshold} stop criterion is the one that needs more generations to finish, and even it never meets some of the conditions (as Table \ref{fig:table} shows in the completion rate column). The maximum score (around 27) is obtained in a number of generations close to the final limitation (500). This happens due to the difficulties for getting a high fitness/score value against the tough rival we have chosen for the evaluation. The \textit{Fitness Improvement} criterion scales well, needing just a few generations to stop. Finally the \textit{Replacement Rate} shows quite variable results, going from a small amount of generations in the first values of the criterion, to  a huge number in the most restrictive ones. Thus, sometimes it does not meet these conditions, as in \textit{FT} case.

The Kruskal-Wallis test (Figure \ref{fig:boxplotgenerations}.b) results are less conclusive this time, since they refer to the number of generations required for some criteria to be met. Thus, the test shows, for instance, that the most restrictive \textit{FI} stop criteria do not present statistical significant differences with respect to the first \textit{Number of Generations} values, so most of the runs have met the criteria in the same number of generations, which denotes a robustness factor for those criteria. This also happens for other criterion values, such as RT\_n/8, RT\_n/16, and FT\_20.

This two measures are compared in Figure \ref{subfig:comparative}. As it can be seen, an improvement in the fitness/score means a higher number of generations are required. This happens in almost all the cases, with some exceptions such as RT\_20 or RT\_22, which get a higher score value in less generations than other criteria. However, this happens due to the commented problem of noise.

In addition to these two studies, a new measure factor has been
computed by means of a benchmark based in battles against several bots
of the literature % [***REF***]  Joder, macho, esto no puede estar
                  % aquí a estas alturas - JJ
 in 100 maps (some of them used during the evolution). This test has been conducted for the best individual obtained when every criterion was met in every run, thus 24x36 bots have been tested.

The results of the benchmark (percentage of victories $\in[0,1]$) are displayed in Figure \ref{fig:victories}.a. 
Figure \ref{fig:victories}.b plots the linear regression analysis between the obtained score by the chosen bots, and the results in the benchmark. It has a value $R^2=0.9351$, which means an excellent correlation, and thus, the score function is quite well defined, since a high value corresponds to a very good individual indeed.
% Antonio - Antares - mira si está bien explicado esto

\begin{figure}[h!tb]
\begin{center}
\subfigure[Benchmark Battles]{\includegraphics[width=0.75\columnwidth]{imags/victories.eps}}
\subfigure[Linear regression]{\includegraphics[width=0.24\columnwidth]{imags/score-victories.eps}}
\end{center} 
\caption{(a) Percentage of victories in benchmark versus several opponents in 100 maps (training and not training). (b) Linear regression of the Score (fitness) with the results of the benchmark (Percentage of victories)} %Antares - TODO: Ahora lo completo
\label{fig:victories}
\end{figure}

% Antonio - Antares - Varias cosas:
% - Las leyendas deberían poner 'Percentage of victories' o '% Victories', y 'SCORE per individual' (en mayúcula o en minúscula, pero siempre igual). ;D
% - ¿Cuántos son 'several opponents'? Hay que poner cuántos rivales se han considerado y cuáles en el texto. 
% - Ha sido en 100 mapas, ¿no? ;D

As it can be seen in Figure \ref{fig:victories}.a, the best results are yielded by the most restrictive criterion, highlighting the FT\_26 results. This is also a reinforcement to the correctness of the score function.

Finally, in order to chose the best stop criterion, we should consider all these three measures. Thus, Table \ref{fig:table} presents all the results as a summary. It also shows the completion rate of every stop criterion (number of runs in which the criterion has been met). Moreover, a comparative set of values have been computed, considering the number of generations equal to 30 (usual in previous papers) as the standard value to relativize the rest.

\begin{figure}[h!tb]
	\begin{minipage}[b]{.50\columnwidth}
		\includegraphics[width=1\columnwidth]{imags/Comparative-log.eps}
		\caption{Average score of the best individual and average reached generations per termination criteria.}
		\label{subfig:comparative}
		\vfill
		\end{minipage}
\hfill
\begin{minipage}[b]{.44\columnwidth}
\includegraphics[width=1\columnwidth]{imags/tabla.eps}

\captionof{table}[foo]{Comparative of each criterion with three measures (averages): Number of generations (G), Score (S), Completion rate in experiments (R) and  Victories in benchmark (V). Relative measures computed with respect to \textit{NG\_30.0}.}
\label{fig:table}
\end{minipage}
\end{figure}

% Antonio - Antares - Revisa la tabla porfa. La última columna de los valores relativos es 'V', ¿verdad?. 'R' no tiene sentido, aro. Si es V, ¿no debería ir la V global como resultado absoluto?
% La 'R' quizá debería ir aparte (en otra columna), ya que si que es global, no se relativiza y no es una media, como el resto de valores. ;)
% Otra cosa: sé que es un coñazo y que no se va a ver nada, pero siempre que se pongan medias,hay que poner desviaciones típicas... :_(

% Antonio - Antares - Pregunta general. ï¿½por quï¿½ los valores en las grï¿½ficas llevan un decimal '.0' si son enteros? ï¿½No estarï¿½an mejor sin ï¿½l? ï¿½No quedarï¿½a mï¿½s claro al haber menos texto? :D
% Antares: @Antonio, por seguir una nomenclatura comï¿½n, pero si quieres podrï¿½a intentar cambiarlo, pero me iba a llevar tiempo.
% Antonio - apúntatelo para la versión definitiva, porfa. Queda un poco raro. ;D

The results in both, the table and Figure \ref{subfig:comparative}, show that, in principle, the best criterion regarding the score and victories in benchmark could be FT\_26. However, looking at the completion rate, it is around 22\%,so this is not a robust criteria (that fitness is quite difficult to be reached).
The case of RT\_22 seems much more promising, since it has a very good comprise between the number of generations required (around 127), and the score obtained (more than 22).

Anyway, these results could be used as a reference to choose the best criterion in every case, depending on the problem and on the restrictions. Thus, for instance, if we are facing a competition with a limited amount of computational time, we could select the best criterion in score and victories taking into account the maximum number of generations that could be reached in that limit.\\

%*** Generalizar esto a cualquier problema => hacerlo una metodología
%***
% Coñe, ¿es que no podéis poner comentarios? -JJ

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  CONCLUSIONS  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
\section{Conclusions}

%% En las conclusiones no debemos olvidar sentar las bases de los tipos de problemas/algoritmos a los que se podrï¿½an extrapolar o generalizar los resultados.

%% - fitness ï¿½ptimo no conocido
%% - ï¿½entorno ruidoso?
%% - que se usen mecanismos para paliar la influencia del ruido es importante (podrï¿½a ser requerido)
% No se usa ningï¿½n mecanismo para ``paliar'' el ruido. Sï¿½ se intenta trabajar con ï¿½l.
% Antares - ï¿½Se podrï¿½a comentar tambiï¿½n que alguno de los criterios de parada podrï¿½a ser empleado para algï¿½n mecanismo diferente del algoritmo, como un
% ``cataclismo'' o una variaciï¿½n de los pesos o algo asï¿½? 

% Antares - Aï¿½ado las conclusiones primero en espaï¿½ol:
%El peor criterio de parada encontrado es el mï¿½todo \textit{[AO] Age of Outliers} basado en la edad de los individuos de la poblaciï¿½n, que es el mï¿½todo que consigue peores resultados en el score ofreciendo una convergencia prï¿½cticamente nula de las soluciones encontradas en la poblaciï¿½n al aumentar lo restrictivo del mï¿½todo. Esto puede ser un indicativo de que la antiguedad de los individuos no es representativo de la bondad de los individuos. Ademï¿½s, el test de Kruskal-Wallis, determinï¿½ que exite poca variaciï¿½n entre las muestras de las distintas variaciones del mï¿½todo.
%Maribel, hago una primera aproximaciï¿½n en inglï¿½s para este pï¿½rrafo. Leerla a ver si es eso exactamente lo que Antares ha querido decir en el pa?rafo en espaï¿½ol, porque yo 

This paper compares five stopping criteria for ending an EA for game
bots. We have selected them taking in mind both the status of the
population or the parameters of the EA. The experiments prove that the
\textit{AO} criterion, based on the Age of Outliers, gets the worst
score. 
% converging quickly but without good solutions while the values
% for \textit{AO} turn older. This chance is a proof of that the older
% individuals have not to be good solutions. Moreover, Kruskal-Wallis
% test outputs non differences among the results for any \textit{AO}
% input values, that is, the output of the runs for any value of
% \textit{AO} are similar.   
% Borrado todo esto porque está mal escrito y además no cabe - JJ
%
%Por otro lado, el mejor criterio encontrado respecto a la bondad de
%los individuos es el \textit{[FT] Fitness Threshold} basado en
%umbrales de fitness. Sin embargo, las dificultades para definir un
%umbral de fitness correcto en un problema de nuestra naturaleza hacen
%este mï¿½todo no recomendado, aunque si ideal si puede
%determinarse. Ademï¿½s, es el mï¿½todo que mï¿½s generaciones
%requiere, con el riesgo de que la ejecuciï¿½n del algoritmo no llegue
%a terminar, al estancarse la poblaciï¿½n y no ser capaz de convergir
%al valor frontera.
%
The best stop criterion considering only bot score is \textit{[FT]
  Fitness Threshold}. Nevertheless this criterion is hard to set
because it is not easy to find the fitness threshold due to the
noise. In any case, if noise is low and the threshold could be fixed
it would be the best option. In any case, this criterion needs the
highest generation number for ending making easier the algorithm ends
by other chance based on \textit{NG}. 
%
% El mï¿½todo basado en \textit{[FI] Fitness Improvement} es un mï¿½todo bastante rï¿½pido (en cuanto a generaciones), pero que no alcanza resultados muy buenos (en cuanto score). A pesar de que no pueda ser empleado como criterio de parada ï¿½ptimo, su uso puede resultar interesante como apoyo al algoritmo como mecanismo de multiarranque del algoritmo o de cataclismo.
%
On the other hand \textit{FI} needs few generations for ending; but
the results, based on score, are not good enough. 
% In spite of it cannot be used as optimal criterion it would reward the algorithm if we use it combined with any other meta-heuristics as a population reset if the best individual stalls.   

%Por ï¿½ltimo, el mï¿½todo de \textit{[FT] Fitness Threshold} es el que ofrece unos resultados mï¿½s consistentes en todas las mï¿½tricas. Dado que se basa en la tasa de reemplazo de los individuos, en cierta manera estï¿½ midiendo el constante crecimiento del fitness dado que los individuos nuevos tienen que tener mayor fitness para entrar en el pull de la nueva poblaciï¿½n, pero sin hacer uso del propio fitness (que sabemos que por su naturaleza ruidosa no es totalmente confiable). 

Finally, \textit{FT} provides the best results if we combine both
metrics, generations and score. It is based on replacement rate,
measuring whether the algorithm is still able to provide an improvement
over last generation. 


%Antares - Blablabla correspondencia lineal entre los resultados de la
%baterï¿½a de test de bondad y el score con un $R^2=0.9351$

% En vez de explicar cada criterio por separado (ya lo debíais haber
% hecho arriba) deberíais explicar por qué este ofrece los mejores
% resultados y concluir qué se debe usar en el futuro. 

\section*{Acknowledgments}

Hidden for double-blind review


\bibliographystyle{splncs03}
\bibliography{geneura,references,gpbot,genebot}

% Antonio - hay muchísimas referencias. Se pueden quitar unas cuantas

\end{document}
